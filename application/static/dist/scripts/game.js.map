{"version":3,"sources":["../../scripts/game.js"],"names":["CreateGame","interval","capacity","quantity","theme","collection","answer","homeworkId","Number","createCollection","index","reduce","n","sum","createBoard","numberField","board","querySelector","prototype","changeNumber","number","innerHTML","String","classList","remove","setTimeout","add","bind","gameInit","that","times","endTimer","gameEnd","performInterval","clearInterval","timer","setInterval","restartButton","hideElement","createAnswerInput","sendResult","where","result","xhr","XMLHttpRequest","body","open","setRequestHeader","onload","status","notify","onerror","send","JSON","stringify","document","createElement","heading","closeButton","numberHolder","className","style","transitionDuration","addEventListener","event","preventDefault","previousElementSibling","parentElement","maxHeight","removeChild","clearTimeout","animAlien","animShadow","answerForm","undefined","appendChild","answerField","submitAnswer","placeholder","restrictKeys","value","backgroundColor","window","location","origin","disabled","contains","startGame","settings","gameInterface","playground","incButtons","querySelectorAll","decButtons","fields","themeCheckers","console","log","forEach","checker","neighbourCheckers","getElementsByTagName","prevCheckers","slice","indexOf","checked","themeOptions","map","split","speed","length","game","parse","responseText","incButton","inputControl","decButton","initialValue","field","min","max","isNaN","Math","round","push","floor","random","pow","obj","time","nodeName","key","which","incValue","amount","button","role","controlledInput","nextElementSibling","step","rest","newNumber","addHomeworkList","tasks","element","taskElements","createHomeworkTask","task","makePaginator","homeworks","limit","paginator","pageCount","ceil","i","offset","pageRadio","setAttribute","pageLabel","listForPage","homeworkElement","parentNode","title","startButton","taskElement","id","paginationWrapper","headerHeight","parseInt","getComputedStyle","firstElementChild","height","headerMargin","marginBottom","tasksHeight","children","tasksMargin","message","textAlign","fontSize","color","replaceChild"],"mappings":"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","file":"game.js","sourcesContent":["/*  Создание игры  */\r\nfunction CreateGame(interval, capacity, quantity, theme, collection, answer, homeworkId) {\r\n    this.interval = Number(interval) * 1000;\r\n    this.quantity = Number(quantity);\r\n    this.capacity = Number(capacity);\r\n    this.theme = theme;\r\n    this.collection = collection || createCollection(capacity, quantity);\r\n    this.index = 0;\r\n    this.answer = answer || this.collection.reduce((n, sum) => n + sum, 0);\r\n    this.homeworkId = homeworkId;\r\n    this.createBoard();\r\n    this.numberField = this.board.querySelector('.game__number');\r\n}\r\n\r\nCreateGame.prototype = {\r\n    /* Меняет текущий индекс и накапливает сумму */\r\n    changeNumber: function () {\r\n        let number = this.collection[this.index];\r\n        this.numberField.innerHTML = String(number);\r\n        this.numberField.classList.remove('hide');\r\n        this.index++;\r\n        setTimeout((function () {\r\n            this.numberField.classList.add('hide');\r\n        }).bind(this), this.interval * 0.8)\r\n    },\r\n    /* Начинает игру */\r\n    gameInit: function () {\r\n        let that = this;\r\n        let times = that.quantity;\r\n        /* Устанавливаем время, до окончания демонстрации, чтобы завершить игру */\r\n        that.endTimer = setTimeout(function () {\r\n            that.gameEnd();\r\n        }, (times + 1) * that.interval + 3000);\r\n        /* Выполняем показ чисел */\r\n        /* Трехсекундная задержка на подготовку */\r\n        setTimeout(function () {\r\n            function performInterval() {\r\n                if (times > 0) {\r\n                    times--;\r\n                    that.changeNumber();\r\n                } else {\r\n                    clearInterval(that.timer);\r\n                }\r\n            }\r\n\r\n            /* Задаем интервал появления чисел */\r\n            that.timer = setInterval(performInterval, that.interval);\r\n            /* Показываем кнопку restart */\r\n            that.restartButton.classList.remove('d-none');\r\n        }, 3000);\r\n        /* Делаем затемнение стартового сообщения */\r\n        setTimeout(function () {\r\n            hideElement(that.numberField, 200);\r\n        }, 2800 + that.interval)\r\n    },\r\n    /* Завершение игры */\r\n    gameEnd: function () {\r\n        let that = this;\r\n        that.numberField.classList.add('hide');\r\n        setTimeout(function () {\r\n            that.createAnswerInput();\r\n        }, this.interval * 0.2);\r\n    },\r\n    /* Записываем результат в переданное место */\r\n    sendResult: function (where, result) {\r\n        let xhr = new XMLHttpRequest();\r\n        let body = {\r\n            result,\r\n            interval: this.interval,\r\n            quantity: this.quantity,\r\n            capacity: this.capacity,\r\n            theme: this.theme\r\n        };\r\n        if (this.homeworkId) {\r\n            body.homeworkId = this.homeworkId;\r\n        }\r\n\r\n        xhr.open(\"POST\", where, true);\r\n        xhr.setRequestHeader('Content-Type', 'application/json');\r\n\r\n        xhr.onload = function () {\r\n            if (xhr.status !== 201 && xhr.status !== 200) {\r\n                notify(true, 'Произошла ошибка при отправке результата', 'failure');\r\n            }\r\n        };\r\n        xhr.onerror = function () {\r\n            notify(true, 'Произошла ошибка при отправке результата', 'failure');\r\n        };\r\n\r\n        xhr.send(JSON.stringify(body));\r\n    },\r\n    /* Создаем поле для игры */\r\n    createBoard: function () {\r\n        let board = document.createElement('div');\r\n        let heading = document.createElement('h2');\r\n        let closeButton = document.createElement('button');\r\n        let restartButton = document.createElement('button');\r\n        let numberHolder = document.createElement('div');\r\n        board.className = 'game-board';\r\n        heading.innerHTML = 'Numbers!';\r\n        heading.className = 'game__heading';\r\n        restartButton.className = 'game__button game__restart-button d-none';\r\n        restartButton.innerHTML = 'Заново';\r\n        closeButton.className = 'game__button game__close-button';\r\n        closeButton.innerHTML = 'Закончить';\r\n        numberHolder.className = 'game__number';\r\n        numberHolder.innerHTML = 'Вперед!';\r\n        if (this.interval) {\r\n            numberHolder.style.transitionDuration = `${this.interval * 0.2}`;\r\n        }\r\n\r\n        /*прикрепляем кнопки к игре*/\r\n        this.restartButton = restartButton;\r\n        this.closeButton = closeButton;\r\n\r\n        /*И вешаем на них обработчики*/\r\n        closeButton.addEventListener('click', event => {\r\n            event.preventDefault();\r\n\r\n            /* Показываем настрйки и убираем текущую игру */\r\n            board.previousElementSibling.classList.remove('hide');\r\n            board.parentElement.style.maxHeight = '';\r\n            board.parentElement.removeChild(board);\r\n            clearTimeout(this.endTimer);\r\n            if (this.animAlien && this.animShadow) {\r\n                this.animAlien.classList.remove('animation_fast');\r\n                this.animShadow.classList.remove('animation_fast');\r\n            }\r\n        });\r\n\r\n        restartButton.addEventListener('click', event => {\r\n            event.preventDefault();\r\n\r\n            clearInterval(this.timer);\r\n            clearTimeout(this.endTimer);\r\n            /* Прячем кнопку restart, чтобы ничего не сломали, пока не пройдут анимации */\r\n            restartButton.classList.add('d-none');\r\n\r\n            /* Прячем доску */\r\n            board.classList.add('hide');\r\n            setTimeout(() => {\r\n                /* Если поле для чисел было скрыто, показываем его */\r\n                this.numberField.classList.remove('hide');\r\n                /* Убираем форму ответа, если дошли до конца и она создалась */\r\n                if (this.answerForm) {\r\n                    this.board.removeChild(this.answerForm);\r\n                    this.answerForm = undefined;\r\n                }\r\n                /* обновляем состояние игры */\r\n                this.index = 0;\r\n                this.numberField.innerHTML = 'Вперед!';\r\n                /* Показываем доску */\r\n                board.classList.remove('hide');\r\n                /* Начинаем сначала */\r\n                this.gameInit();\r\n            }, 1000)\r\n        });\r\n\r\n        board.appendChild(heading);\r\n        board.appendChild(numberHolder);\r\n        board.appendChild(restartButton);\r\n        board.appendChild(closeButton);\r\n\r\n        this.board = board;\r\n    },\r\n\r\n    createAnswerInput: function () {\r\n        let answerForm = document.createElement('div');\r\n        let answerField = document.createElement('input');\r\n        let submitAnswer = document.createElement('button');\r\n        answerForm.className = 'game__answer-form';\r\n        answerField.className = 'game__answer-field input_light-theme';\r\n        submitAnswer.className = 'game__answer-submit button_dark-theme';\r\n\r\n        submitAnswer.innerHTML = 'Проверить';\r\n        answerField.placeholder = 'Введите сумму чисел';\r\n        answerForm.appendChild(answerField);\r\n        answerForm.appendChild(submitAnswer);\r\n\r\n        answerField.addEventListener('keypress', restrictKeys);\r\n        submitAnswer.addEventListener('click', (function (event) {\r\n            event.preventDefault();\r\n            if (answerField.value === '') {\r\n                answerField.placeholder = 'Введите ответ';\r\n                answerField.style.backgroundColor = '#ffe814';\r\n                return false;\r\n            }\r\n            if (Number(answerField.value) === this.answer) {\r\n                answerField.style.backgroundColor = '#1fc113';\r\n                answerField.value = 'Правильно!';\r\n                this.sendResult(window.location.origin + (this.homeworkId ? '/homeworkResult' : '/gameResult'), 'success')\r\n            } else {\r\n                answerField.style.backgroundColor = '#ff2b0a';\r\n                answerField.value = 'Ошибка, попробуйте снова';\r\n                this.sendResult(window.location.origin + (this.homeworkId ? '/homeworkResult' : '/gameResult'), 'failure')\r\n            }\r\n            answerField.disabled = true;\r\n            submitAnswer.disabled = true;\r\n        }).bind(this));\r\n\r\n        this.board.appendChild(answerForm);\r\n        this.answerForm = answerForm;\r\n    }\r\n};\r\n\r\nif (document.body.classList.contains('game-body')) {\r\n    CreateGame.prototype.animAlien = document.querySelector('.settings__animated-image');\r\n    CreateGame.prototype.animShadow = document.querySelector('.shadow');\r\n\r\n    let startGame = document.querySelector('.settings__start-game');\r\n    let settings = document.querySelector('.settings__main-window');\r\n    let gameInterface = document.querySelector('.game-interface');\r\n    let playground = document.querySelector('.playground');\r\n\r\n    let incButtons = document.querySelectorAll('.button_inc');\r\n    let decButtons = document.querySelectorAll('.button_dec');\r\n    let fields = document.querySelectorAll('.settings__input');\r\n    let themeCheckers = [...gameInterface.querySelectorAll('.settings__theme-option')];\r\n    console.log(themeCheckers);\r\n\r\n    themeCheckers.forEach(checker => checker.addEventListener('change', function (event) {\r\n        let neighbourCheckers = [...this.parentElement.getElementsByTagName('input')];\r\n        let prevCheckers = neighbourCheckers.slice(0, neighbourCheckers.indexOf(this));\r\n\r\n        prevCheckers.forEach(checker => {\r\n            checker.checked = this.checked;\r\n        })\r\n    }));\r\n\r\n    /*   Начало игры   */\r\n    startGame.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n\r\n        let themeOptions = [...gameInterface.querySelectorAll('.settings__theme-option:checked')].map(({value}) => value.split('_'));\r\n        let speed = gameInterface.querySelector('.settings__speed-value').value.split(' ')[0];\r\n        let capacity = gameInterface.querySelector('.settings__capacity-value').value;\r\n        let quantity = gameInterface.querySelector('.settings__quantity-value').value;\r\n        if (!themeOptions.length) {\r\n            notify(true, 'Пожалуйста, выберите темы', 'warning');\r\n\r\n            return;\r\n        }\r\n\r\n        this.classList.add('btn-loading_light');\r\n        this.disabled = true;\r\n\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open('POST', window.location.origin + '/generator', true);\r\n        xhr.setRequestHeader('Content-Type', 'application/json');\r\n        xhr.onload = function () {\r\n            if (xhr.status === 200) {\r\n                setTimeout(function () {\r\n                    this.disabled = false;\r\n                }.bind(this), 1000);\r\n                let game = new CreateGame(speed, capacity, quantity, themeOptions, JSON.parse(xhr.responseText));\r\n                /* Как только начнется демонстрация, показываем кнопку restart */\r\n                setTimeout(function () {\r\n                    game.restartButton.classList.remove('d-none');\r\n                }, 3000);\r\n\r\n                /* Убираем окно настроек */\r\n                settings.classList.add('hide');\r\n\r\n                /* Таймаут для того, чтобы прошла анимация скрывания настроек */\r\n                setTimeout(function () {\r\n                    gameInterface.style.maxHeight = '100vh';\r\n                    /* Показываем доску */\r\n                    gameInterface.appendChild(game.board);\r\n                    /* Ускоряем пришельца */\r\n                    if (game.animAlien && game.animShadow) {\r\n                        game.animAlien.classList.add('animation_fast');\r\n                        game.animShadow.classList.add('animation_fast');\r\n                    }\r\n                }, 1000);\r\n                /* Начинаем показ */\r\n                game.gameInit();\r\n            } else {\r\n                this.disabled = false;\r\n                this.classList.remove('btn-loading_light');\r\n                notify(true, `Что-то пошло не так: (Код ошибки - ${xhr.status})`, 'failure');\r\n            }\r\n        }.bind(this);\r\n\r\n        xhr.onerror = function () {\r\n            this.disabled = false;\r\n            this.classList.remove('btn-loading_light');\r\n            notify(true, `Что-то пошло не так: (Код ошибки - ${xhr.status})`, 'failure');\r\n        }.bind(this);\r\n\r\n        xhr.send(JSON.stringify({speed, capacity, quantity, themeOptions}));\r\n    });\r\n\r\n    /* Вешаем обработчики */\r\n    for (let incButton of incButtons) {\r\n        incButton.addEventListener('click', inputControl.bind(null, incButton, 'inc'));\r\n    }\r\n\r\n    for (let decButton of decButtons) {\r\n        decButton.addEventListener('click', inputControl.bind(null, decButton, 'dec'));\r\n    }\r\n\r\n    let initialValue;\r\n    for (let field of fields) {\r\n        field.addEventListener('keypress', restrictKeys);\r\n        field.addEventListener('focus', function () {\r\n            initialValue = this.value;\r\n            this.value = '';\r\n        });\r\n        field.addEventListener('blur', function () {\r\n            if (this.value === '') {\r\n                this.value = initialValue;\r\n\r\n                return;\r\n            }\r\n            if (Number(this.value) < Number(this.min)) {\r\n                this.value = this.min;\r\n            }\r\n            if (Number(this.value) > Number(this.max)) {\r\n                this.value = this.max;\r\n            }\r\n            if (this.classList.contains('settings__speed-value')) {\r\n                this.value = isNaN(Number(this.value)) ? this.min + ' сек' : (Math.round(Number(this.value) * 10) / 10) + ' сек';\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/* Создает набор из случайных чисел заданного разряда */\r\nfunction createCollection(capacity, quantity) {\r\n    let collection = [];\r\n    while (quantity > 0) {\r\n        collection.push(Math.floor(Math.random() * Math.pow(10, capacity)));\r\n        quantity--;\r\n    }\r\n\r\n    return collection;\r\n}\r\n\r\n/* Скрываем обьект на заданное время */\r\nfunction hideElement(obj, time) {\r\n    if (obj && obj.nodeName) {\r\n        obj.classList.add('hide');\r\n        setTimeout(function () {\r\n            obj.classList.remove('hide');\r\n        }, time)\r\n    }\r\n}\r\n\r\n/*   Запрет на ввод символов не являющихся цифрами   */\r\nfunction restrictKeys(event) {\r\n    if (event.key === '.' && this.classList.contains('settings__speed-value')) {\r\n        return true;\r\n    }\r\n    if (!(event.which >= 48 && event.which <= 57)) {\r\n        event.preventDefault();\r\n    }\r\n}\r\n\r\n/* Увеличиваем значение на заданную величину */\r\nfunction incValue(value, amount) {\r\n    return `${Math.round((Number(value) + Number(amount)) * 10) / 10}`;\r\n}\r\n\r\n/*   Контроль полей ввода   */\r\nfunction inputControl(button, role, event) {\r\n    event.preventDefault();\r\n    let controlledInput = role === 'inc' ? button.previousElementSibling : button.nextElementSibling;\r\n    let step = role === 'inc' ? controlledInput.step : -controlledInput.step;\r\n    let [number, rest] = controlledInput.value.split(' ');\r\n    let newNumber = incValue(number, step);\r\n    if (Number(newNumber) <= Number(controlledInput.max) && Number(newNumber) >= Number(controlledInput.min)) {\r\n        controlledInput.value = rest ? newNumber + ` ${rest}` : newNumber;\r\n    }\r\n}\r\n\r\nif (document.body.classList.contains('homework-body')) {\r\n    let placeholder = document.querySelector('.loading-placeholder');\r\n    let homeworkElement = document.querySelector('.homework');\r\n\r\n    let xhr = new XMLHttpRequest();\r\n    // TODO изсменить запрос\r\n    xhr.open('GET', `${window.location.origin}/testData/homeworkConfig.json`, true);\r\n\r\n    xhr.setRequestHeader('Content-Type', 'application/json');\r\n    xhr.onload = function () {\r\n        if (xhr.status === 200) {\r\n            placeholder.parentElement.removeChild(placeholder);\r\n\r\n            let homeworks = JSON.parse(xhr.responseText);\r\n            let paginator = makePaginator(homeworks);\r\n            homeworkElement.parentNode.appendChild(paginator);\r\n            addHomeworkList(homeworks.slice(0, 4), homeworkElement);\r\n            // Устанавливаем высоту, чтобы не скакала при переключении страниц\r\n            let headerHeight = parseInt(getComputedStyle(homeworkElement.firstElementChild).height);\r\n            let headerMargin = parseInt(getComputedStyle(homeworkElement.firstElementChild).marginBottom);\r\n            let tasksHeight = parseInt(getComputedStyle(homeworkElement.children[1]).height) * 4;\r\n            let tasksMargin = parseInt(getComputedStyle(homeworkElement.children[1]).marginBottom) * 4;\r\n            homeworkElement.style.height = (headerHeight + tasksHeight + headerMargin + tasksMargin) + 'px';\r\n            // Добавляем изменение размеров на ресайз окна\r\n            window.addEventListener('resize', function () {\r\n                let headerHeight = parseInt(getComputedStyle(homeworkElement.firstElementChild).height);\r\n                let headerMargin = parseInt(getComputedStyle(homeworkElement.firstElementChild).marginBottom);\r\n                let tasksHeight = parseInt(getComputedStyle(homeworkElement.children[1]).height) * 4;\r\n                let tasksMargin = parseInt(getComputedStyle(homeworkElement.children[1]).marginBottom) * 4;\r\n                console.log(headerHeight, tasksHeight);\r\n                homeworkElement.style.height = (headerHeight + tasksHeight + headerMargin + tasksMargin) + 'px';\r\n            })\r\n        } else if (xhr.status === 404) {\r\n            let message = document.createElement('div');\r\n            message.innerHTML = 'У вас нет невыполненного домашнего задания';\r\n            message.style.textAlign = 'center';\r\n            message.style.fontSize = '1.5em';\r\n            message.style.color = '#43c40f';\r\n            homeworkElement.replaceChild(message, placeholder);\r\n        } else {\r\n            notify(true, `Ошибка получения информации о группах (Код ошибки - ${xhr.status})`, 'failure');\r\n        }\r\n    };\r\n    xhr.onerror = function () {\r\n        notify(true, `Ошибка получения информации о группах (Код ошибки - ${xhr.status})`, 'failure');\r\n    };\r\n    xhr.send();\r\n\r\n    function addHomeworkList(tasks, element) {\r\n        let taskElements = tasks.map(createHomeworkTask);\r\n        taskElements.forEach(task => element.appendChild(task));\r\n    }\r\n\r\n    function makePaginator(homeworks) {\r\n        let limit = 4;\r\n        let paginator = document.createElement('div');\r\n        paginator.classList.add('paginator');\r\n        let pageCount = Math.ceil(homeworks.length / 4);\r\n        for (let i = 0; i < pageCount; i++) {\r\n            let offset = i * limit;\r\n\r\n            let pageRadio = document.createElement('input');\r\n            pageRadio.setAttribute('type', 'radio');\r\n            pageRadio.setAttribute('id', `page-${i + 1}`);\r\n            pageRadio.setAttribute('name', 'pagination');\r\n            pageRadio.classList.add('paginator__radio');\r\n            if (i === 0) {\r\n                pageRadio.setAttribute('checked', 'checked');\r\n            }\r\n\r\n            let pageLabel = document.createElement('label');\r\n            pageLabel.setAttribute('for', `page-${i + 1}`);\r\n            pageLabel.classList.add('paginator__label', 'input_light-theme');\r\n            pageLabel.innerHTML = `${i + 1}`;\r\n\r\n            pageLabel.addEventListener('click', function () {\r\n                let listForPage = homeworks.slice(offset, offset + limit);\r\n                [...homeworkElement.querySelectorAll('.homework__task')].forEach(function (element) {\r\n                    element.parentNode.removeChild(element);\r\n                });\r\n\r\n                addHomeworkList(listForPage, homeworkElement);\r\n            });\r\n\r\n            paginator.appendChild(pageRadio);\r\n            paginator.appendChild(pageLabel);\r\n        }\r\n\r\n        return paginator;\r\n    }\r\n\r\n    function createHomeworkTask(task) {\r\n        CreateGame.prototype.animAlien = document.querySelector('.settings__animated-image');\r\n        CreateGame.prototype.animShadow = document.querySelector('.shadow');\r\n        let title = document.createElement('p');\r\n        let startButton = document.createElement('button');\r\n        let taskElement = document.createElement('div');\r\n        title.classList.add('homework__title');\r\n        startButton.classList.add('homework__start-button');\r\n        startButton.classList.add('button_dark-theme');\r\n        taskElement.classList.add('homework__task');\r\n        title.innerHTML = `Скорость: ${task.speed}, Тема: ${task.theme}`;\r\n        startButton.innerHTML = 'Выполнить';\r\n\r\n        startButton.addEventListener('click', function (event) {\r\n            event.preventDefault();\r\n\r\n            this.disabled = true;\r\n            setTimeout(function () {\r\n                this.disabled = false;\r\n            }.bind(this), 1000);\r\n\r\n            let game = new CreateGame(task.speed, 0, task.collection.length, task.theme, task.collection, task.answer, task.id);\r\n\r\n            setTimeout(function () {\r\n                game.restartButton.classList.remove('d-none');\r\n            }, 3000);\r\n\r\n            let paginationWrapper = document.querySelector('.pagination-wrapper');\r\n            /* Убираем окно настроек */\r\n            paginationWrapper.classList.add('hide');\r\n\r\n            /* Таймаут для того, чтобы прошла анимация скрывания настроек */\r\n            setTimeout(function () {\r\n                /* Показываем доску */\r\n                paginationWrapper.parentElement.style.maxHeight = '100vh';\r\n                paginationWrapper.parentElement.appendChild(game.board);\r\n                /* Ускоряем пришельца */\r\n                if (game.animAlien && game.animShadow) {\r\n                    game.animAlien.classList.add('animation_fast');\r\n                    game.animShadow.classList.add('animation_fast');\r\n                }\r\n            }, 1000);\r\n            /* Начинаем показ */\r\n            game.gameInit();\r\n\r\n        });\r\n\r\n        taskElement.appendChild(title);\r\n        taskElement.appendChild(startButton);\r\n\r\n        return taskElement;\r\n    }\r\n}\r\n"]}