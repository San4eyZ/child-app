{"version":3,"sources":["../../scripts/form.js"],"names":["linkToReg","document","querySelector","linkToLogin","linkToReset","overlay","regWindow","loginWindow","resetWindow","windowCloseButtons","querySelectorAll","onlyForUsers","body","classList","contains","loginButton","regButton","addEventListener","showWindow","bind","gameWindowLogin","button","hideWindow","parentElement","user","event","preventDefault","alert","regForm","regInputs","regFormBtn","values","map","value","notify","test","every","loginForm","loginInputs","slice","loginFormBtn","resetForm","emailForReset","resetFormBtn","element","isFromPage","add","remove","setTimeout"],"mappings":";;;;AAAA,IAAIA,YAAYC,SAASC,aAAT,CAAuB,qBAAvB,CAAhB;AACA,IAAIC,cAAcF,SAASC,aAAT,CAAuB,qBAAvB,CAAlB;AACA,IAAIE,cAAcH,SAASC,aAAT,CAAuB,6BAAvB,CAAlB;AACA,IAAIG,UAAUJ,SAASC,aAAT,CAAuB,UAAvB,CAAd;AACA,IAAII,YAAYL,SAASC,aAAT,CAAuB,aAAvB,CAAhB;AACA,IAAIK,cAAcN,SAASC,aAAT,CAAuB,eAAvB,CAAlB;AACA,IAAIM,cAAcP,SAASC,aAAT,CAAuB,eAAvB,CAAlB;;AAEA,IAAIO,qBAAqBR,SAASS,gBAAT,CAA0B,sBAA1B,CAAzB;AACA,IAAIC,eAAeV,SAASS,gBAAT,CAA0B,iBAA1B,CAAnB;;AAEA,IAAIT,SAASW,IAAT,CAAcC,SAAd,CAAwBC,QAAxB,CAAiC,YAAjC,CAAJ,EAAoD;AAChD,QAAIC,cAAcd,SAASC,aAAT,CAAuB,cAAvB,CAAlB;AACA,QAAIc,YAAYf,SAASC,aAAT,CAAuB,YAAvB,CAAhB;AACAa,gBAAYE,gBAAZ,CAA6B,OAA7B,EAAsCC,WAAWC,IAAX,CAAgB,IAAhB,EAAsBZ,WAAtB,EAAmC,IAAnC,CAAtC;AACAS,cAAUC,gBAAV,CAA2B,OAA3B,EAAoCC,WAAWC,IAAX,CAAgB,IAAhB,EAAsBb,SAAtB,EAAiC,IAAjC,CAApC;AACH;;AAED,IAAIc,kBAAkBnB,SAASC,aAAT,CAAuB,8BAAvB,CAAtB;AACA,IAAIkB,eAAJ,EAAqB;AACjBA,oBAAgBH,gBAAhB,CAAiC,OAAjC,EAA0CC,WAAWC,IAAX,CAAgB,IAAhB,EAAsBZ,WAAtB,EAAmC,IAAnC,CAA1C;AACH;;AAEDP,UAAUiB,gBAAV,CAA2B,OAA3B,EAAoCC,WAAWC,IAAX,CAAgB,IAAhB,EAAsBb,SAAtB,EAAiC,KAAjC,CAApC;AACAH,YAAYc,gBAAZ,CAA6B,OAA7B,EAAsCC,WAAWC,IAAX,CAAgB,IAAhB,EAAsBZ,WAAtB,EAAmC,KAAnC,CAAtC;AACAH,YAAYa,gBAAZ,CAA6B,OAA7B,EAAsCC,WAAWC,IAAX,CAAgB,IAAhB,EAAsBX,WAAtB,EAAmC,KAAnC,CAAtC;;;;;;;AAEA,yBAAmBC,kBAAnB,8HAAuC;AAAA,YAA9BY,MAA8B;;AACnCA,eAAOJ,gBAAP,CAAwB,OAAxB,EAAiCK,WAAWH,IAAX,CAAgB,IAAhB,EAAsBE,OAAOE,aAA7B,CAAjC;AACH;;;;;;;;;;;;;;;;;;;;;AAED,0BAAiBZ,YAAjB,mIAA+B;AAAA,YAAtBa,IAAsB;;AAC3BA,aAAKP,gBAAL,CAAsB,OAAtB,EAA+BC,WAAWC,IAAX,CAAgB,IAAhB,EAAsBb,SAAtB,EAAiC,IAAjC,CAA/B;AACAkB,aAAKP,gBAAL,CAAsB,OAAtB,EAA+B,UAAUQ,KAAV,EAAiB;AAC5CA,kBAAMC,cAAN;AACAC,kBAAM,sDAAN;AACH,SAHD;AAIH;;;;;;;;;;;;;;;;AAGD,IAAIC,UAAUtB,UAAUJ,aAAV,CAAwB,WAAxB,CAAd;AACA,IAAI2B,YAAYD,QAAQlB,gBAAR,CAAyB,OAAzB,CAAhB;AACA,IAAIoB,aAAaF,QAAQ1B,aAAR,CAAsB,mBAAtB,CAAjB;;AAEA4B,WAAWb,gBAAX,CAA4B,OAA5B,EAAqC,UAAUQ,KAAV,EAAiB;AAClD,QAAIM,SAAS,6BAAIF,SAAJ,GAAeG,GAAf,CAAmB;AAAA,YAAGC,KAAH,QAAGA,KAAH;AAAA,eAAeA,KAAf;AAAA,KAAnB,CAAb;;AAEA,QAAIF,OAAO,CAAP,KAAaA,OAAO,CAAP,CAAb,IAA0BA,OAAO,CAAP,MAAcA,OAAO,CAAP,CAA5C,EAAuD;AACnDN,cAAMC,cAAN;AACAQ,eAAO,IAAP,EAAa,gCAAb,EAA+C,SAA/C;;AAEA;AACH;;AAED,QAAIH,OAAO,CAAP,KAAa,CAAC,8CAA8CI,IAA9C,CAAmDJ,OAAO,CAAP,CAAnD,CAAlB,EAAiF;AAC7EN,cAAMC,cAAN;AACAQ,eAAO,IAAP,EAAa,4BAAb,EAA2C,SAA3C;;AAEA;AACH;;AAED,QAAI,CAACH,OAAOK,KAAP,CAAa;AAAA,eAASH,KAAT;AAAA,KAAb,CAAL,EAAmC;AAC/BR,cAAMC,cAAN;AACAQ,eAAO,IAAP,EAAa,iCAAb,EAAgD,SAAhD;AACH;AACJ,CArBD;;AAuBA,IAAIG,YAAY9B,YAAYL,aAAZ,CAA0B,aAA1B,CAAhB;AACA,IAAIoC,cAAc,6BAAID,UAAU3B,gBAAV,CAA2B,OAA3B,CAAJ,GAAyC6B,KAAzC,CAA+C,CAA/C,EAAkD,CAAlD,CAAlB;AACA,IAAIC,eAAejC,YAAYL,aAAZ,CAA0B,qBAA1B,CAAnB;;AAEAsC,aAAavB,gBAAb,CAA8B,OAA9B,EAAuC,YAAY;AAC/C,QAAIc,SAASO,YAAYN,GAAZ,CAAgB;AAAA,YAAGC,KAAH,SAAGA,KAAH;AAAA,eAAeA,KAAf;AAAA,KAAhB,CAAb;;AAEA,QAAIF,OAAO,CAAP,KAAa,CAAC,8CAA8CI,IAA9C,CAAmDJ,OAAO,CAAP,CAAnD,CAAlB,EAAiF;AAC7EN,cAAMC,cAAN;AACAQ,eAAO,IAAP,EAAa,4BAAb,EAA2C,SAA3C;;AAEA;AACH;;AAED,QAAIH,OAAO,CAAP,KAAa,CAAC,2BAA2BI,IAA3B,CAAgCJ,OAAO,CAAP,CAAhC,CAAlB,EAA8D;AAC1DN,cAAMC,cAAN;AACAQ,eAAO,IAAP,EAAa,sFACT,0DADJ,EACgE,SADhE;;AAGA;AACH;;AAED,QAAI,CAACH,OAAOK,KAAP,CAAa;AAAA,eAASH,KAAT;AAAA,KAAb,CAAL,EAAmC;AAC/BR,cAAMC,cAAN;AACAQ,eAAO,IAAP,EAAa,iCAAb,EAAgD,SAAhD;AACH;AACJ,CAtBD;;AAwBA,IAAIO,YAAYjC,YAAYN,aAAZ,CAA0B,aAA1B,CAAhB;AACA,IAAIwC,gBAAgBD,UAAUvC,aAAV,CAAwB,OAAxB,CAApB;AACA,IAAIyC,eAAeF,UAAUvC,aAAV,CAAwB,qBAAxB,CAAnB;;AAEAyC,aAAa1B,gBAAb,CAA8B,OAA9B,EAAuC,UAAUQ,KAAV,EAAiB;AACpD,QAAIQ,QAAQS,cAAcT,KAA1B;;AAEA,QAAIA,SAAS,CAAC,8CAA8CE,IAA9C,CAAmDF,KAAnD,CAAd,EAAyE;AACrER,cAAMC,cAAN;AACAQ,eAAO,IAAP,EAAa,4BAAb,EAA2C,SAA3C;;AAEA;AACH;AACD,QAAI,CAACD,KAAL,EAAY;AACRR,cAAMC,cAAN;AACAQ,eAAO,IAAP,EAAa,4BAAb,EAA2C,SAA3C;AACH;AACJ,CAbD;;AAgBA,SAAShB,UAAT,CAAoB0B,OAApB,EAA6BC,UAA7B,EAAyCpB,KAAzC,EAAgD;AAC5CA,UAAMC,cAAN;AACA,QAAImB,UAAJ,EAAgB;AACZD,gBAAQ/B,SAAR,CAAkBiC,GAAlB,CAAsB,aAAtB;AACAzC,gBAAQQ,SAAR,CAAkBiC,GAAlB,CAAsB,cAAtB;AACH,KAHD,MAGO;AACHvC,oBAAYM,SAAZ,CAAsBkC,MAAtB,CAA6B,aAA7B;AACAzC,kBAAUO,SAAV,CAAoBkC,MAApB,CAA2B,aAA3B;AACAH,gBAAQ/B,SAAR,CAAkBiC,GAAlB,CAAsB,aAAtB;AACH;AACJ;;AAED,SAASxB,UAAT,CAAoBsB,OAApB,EAA6BnB,KAA7B,EAAoC;AAChCA,UAAMC,cAAN;AACAkB,YAAQ/B,SAAR,CAAkBiC,GAAlB,CAAsB,MAAtB;AACAzC,YAAQQ,SAAR,CAAkBiC,GAAlB,CAAsB,MAAtB;AACAE,eAAW,YAAY;AACnB3C,gBAAQQ,SAAR,CAAkBkC,MAAlB,CAAyB,MAAzB;AACA1C,gBAAQQ,SAAR,CAAkBkC,MAAlB,CAAyB,cAAzB;AACAH,gBAAQ/B,SAAR,CAAkBkC,MAAlB,CAAyB,MAAzB;AACAH,gBAAQ/B,SAAR,CAAkBkC,MAAlB,CAAyB,aAAzB;AACH,KALD,EAKG,IALH;AAMH","file":"form.js","sourcesContent":["let linkToReg = document.querySelector('.login-form__to-reg');\r\nlet linkToLogin = document.querySelector('.reg-form__to-login');\r\nlet linkToReset = document.querySelector('.login-form__forgotten-pass');\r\nlet overlay = document.querySelector('.overlay');\r\nlet regWindow = document.querySelector('.reg-window');\r\nlet loginWindow = document.querySelector('.login-window');\r\nlet resetWindow = document.querySelector('.reset-window');\r\n\r\nlet windowCloseButtons = document.querySelectorAll('.window-close-button');\r\nlet onlyForUsers = document.querySelectorAll('.for-registered');\r\n\r\nif (document.body.classList.contains('index-body')) {\r\n    let loginButton = document.querySelector('.main__login');\r\n    let regButton = document.querySelector('.main__reg');\r\n    loginButton.addEventListener('click', showWindow.bind(null, loginWindow, true));\r\n    regButton.addEventListener('click', showWindow.bind(null, regWindow, true));\r\n}\r\n\r\nlet gameWindowLogin = document.querySelector('.main-navigation__game-login');\r\nif (gameWindowLogin) {\r\n    gameWindowLogin.addEventListener('click', showWindow.bind(null, loginWindow, true));\r\n}\r\n\r\nlinkToReg.addEventListener('click', showWindow.bind(null, regWindow, false));\r\nlinkToLogin.addEventListener('click', showWindow.bind(null, loginWindow, false));\r\nlinkToReset.addEventListener('click', showWindow.bind(null, resetWindow, false));\r\n\r\nfor (let button of windowCloseButtons) {\r\n    button.addEventListener('click', hideWindow.bind(null, button.parentElement))\r\n}\r\n\r\nfor (let user of onlyForUsers) {\r\n    user.addEventListener('click', showWindow.bind(null, regWindow, true));\r\n    user.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        alert('Доступно только для зарегистрированных пользователей')\r\n    })\r\n}\r\n\r\n\r\nlet regForm = regWindow.querySelector('.reg-form');\r\nlet regInputs = regForm.querySelectorAll('input');\r\nlet regFormBtn = regForm.querySelector('.reg-form__button');\r\n\r\nregFormBtn.addEventListener('click', function (event) {\r\n    let values = [...regInputs].map(({ value }) => value);\r\n\r\n    if (values[1] && values[2] && values[1] !== values[2]) {\r\n        event.preventDefault();\r\n        notify(true, 'Введенные пароли не совпадают.', 'warning');\r\n\r\n        return;\r\n    }\r\n\r\n    if (values[0] && !/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,5})+$/.test(values[0])) {\r\n        event.preventDefault();\r\n        notify(true, 'Введен некорректный email.', 'warning');\r\n\r\n        return;\r\n    }\r\n\r\n    if (!values.every(value => value)) {\r\n        event.preventDefault();\r\n        notify(true, 'Пожалуйста, заполните все поля.', 'warning');\r\n    }\r\n});\r\n\r\nlet loginForm = loginWindow.querySelector('.login-form');\r\nlet loginInputs = [...loginForm.querySelectorAll('input')].slice(0, 2);\r\nlet loginFormBtn = loginWindow.querySelector('.login-form__button');\r\n\r\nloginFormBtn.addEventListener('click', function () {\r\n    let values = loginInputs.map(({ value }) => value);\r\n\r\n    if (values[0] && !/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,5})+$/.test(values[0])) {\r\n        event.preventDefault();\r\n        notify(true, 'Введен некорректный email.', 'warning');\r\n\r\n        return;\r\n    }\r\n\r\n    if (values[1] && !/^[.\\-_@a-zA-Z0-9]{6,20}$/.test(values[1])) {\r\n        event.preventDefault();\r\n        notify(true, 'Введите подходящий пароль. Пароль может содержать латинские буквы, цифры, @, -, _' +\r\n            ' и должен быть не менее 6 символов в длину и не более 20', 'warning');\r\n\r\n        return;\r\n    }\r\n\r\n    if (!values.every(value => value)) {\r\n        event.preventDefault();\r\n        notify(true, 'Пожалуйста, заполните все поля.', 'warning');\r\n    }\r\n});\r\n\r\nlet resetForm = resetWindow.querySelector('.reset-form');\r\nlet emailForReset = resetForm.querySelector('input');\r\nlet resetFormBtn = resetForm.querySelector('.reset-form__button');\r\n\r\nresetFormBtn.addEventListener('click', function (event) {\r\n    let value = emailForReset.value;\r\n\r\n    if (value && !/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,5})+$/.test(value)) {\r\n        event.preventDefault();\r\n        notify(true, 'Введен некорректный email.', 'warning');\r\n\r\n        return;\r\n    }\r\n    if (!value) {\r\n        event.preventDefault();\r\n        notify(true, 'Пожалуйста, введите email.', 'warning');\r\n    }\r\n});\r\n\r\n\r\nfunction showWindow(element, isFromPage, event) {\r\n    event.preventDefault();\r\n    if (isFromPage) {\r\n        element.classList.add('show-window');\r\n        overlay.classList.add('show-overlay');\r\n    } else {\r\n        loginWindow.classList.remove('show-window');\r\n        regWindow.classList.remove('show-window');\r\n        element.classList.add('show-window');\r\n    }\r\n}\r\n\r\nfunction hideWindow(element, event) {\r\n    event.preventDefault();\r\n    element.classList.add('hide');\r\n    overlay.classList.add('hide');\r\n    setTimeout(function () {\r\n        overlay.classList.remove('hide');\r\n        overlay.classList.remove('show-overlay');\r\n        element.classList.remove('hide');\r\n        element.classList.remove('show-window');\r\n    }, 1000)\r\n}\r\n"]}