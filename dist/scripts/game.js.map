{"version":3,"sources":["../../scripts/game.js"],"names":["CreateGame","interval","capacity","quantity","themeNumber","Number","collection","createCollection","number","Math","floor","random","pow","sum","board","createBoard","numberField","querySelector","changeNumber","length","rand","splice","push","document","createElement","heading","closeButton","restartButton","fullscreenOn","fullscreenOff","numberHolder","className","innerHTML","appendChild","startGame","settings","gameInterface","incButtons","querySelectorAll","decButtons","fields","incValue","value","amount","round","inputControl","button","role","event","preventDefault","controlledInput","previousElementSibling","nextElementSibling","step","split","rest","newNumber","max","min","restrictKeys","which","addEventListener","alien","shadow","themeOption","speed","game","classList","add","setTimeout","i","index","incButton","bind","decButton","field"],"mappings":"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","file":"game.js","sourcesContent":["/*  Создание игры  */\r\nfunction CreateGame(interval, capacity, quantity, themeNumber) {\r\n    this.interval = Number(interval) * 1000;\r\n    this.quantity = Number(quantity);\r\n    this.capacity = Number(capacity);\r\n    this.themeNumber = Number(themeNumber);\r\n    this.collection = createCollection(capacity, quantity);\r\n    this.number = Math.floor(Math.random() * Math.pow(10, capacity));\r\n    this.sum = this.number;\r\n    this.board = createBoard();\r\n    this.numberField = this.board.querySelector('.game__number');\r\n    this.changeNumber = function () {\r\n        if (this.collection.length) {\r\n            let rand = Math.floor(Math.random() * this.collection.length);\r\n            this.sum += this.number;\r\n            this.number = this.collection[rand];\r\n            this.collection.splice(rand, 1);\r\n        } else {\r\n            this.number = -1;\r\n        }\r\n    }\r\n}\r\n\r\nfunction createCollection(capacity, quantity) {\r\n    let collection = [];\r\n    while (quantity - 1) {\r\n        collection.push(Math.floor(Math.random() * Math.pow(10, capacity)));\r\n        quantity--;\r\n    }\r\n\r\n    return collection;\r\n}\r\n\r\nfunction createBoard() {\r\n    let board = document.createElement('div');\r\n    let heading = document.createElement('h2');\r\n    let closeButton = document.createElement('button');\r\n    let restartButton = document.createElement('button');\r\n    let fullscreenOn = document.createElement('button');\r\n    let fullscreenOff = document.createElement('button');\r\n    let numberHolder = document.createElement('div');\r\n    board.className = 'game-board';\r\n    heading.innerHTML = 'Вперед!';\r\n    heading.className = 'game__heading';\r\n    restartButton.className = 'game__button game__restart-button';\r\n    restartButton.innerHTML = 'Заново';\r\n    closeButton.className = 'game__button game__close-button';\r\n    closeButton.innerHTML = 'Закончить';\r\n    fullscreenOn.className = 'game__button game__fullscreen-on d-none d-md-block';\r\n    fullscreenOff.className = 'game__button game__fullscreen-off';\r\n    numberHolder.className = 'game__number';\r\n    numberHolder.innerHTML = '1234567';\r\n    board.appendChild(heading);\r\n    board.appendChild(numberHolder);\r\n    board.appendChild(restartButton);\r\n    board.appendChild(closeButton);\r\n    board.appendChild(fullscreenOn);\r\n\r\n    return board;\r\n}\r\n\r\nlet startGame = document.querySelector('.settings__start-game');\r\nlet settings = document.querySelector('.settings__main-window');\r\nlet gameInterface = document.querySelector('.game-interface');\r\n\r\nlet incButtons = document.querySelectorAll('.button_inc');\r\nlet decButtons = document.querySelectorAll('.button_dec');\r\nlet fields = document.querySelectorAll('.settings__input');\r\n\r\nlet incValue = function (value, amount) {\r\n    return `${Math.round((Number(value) + Number(amount)) * 10) / 10}`;\r\n};\r\n\r\n/*   Контроль полей ввода   */\r\nlet inputControl = function (button, role, event) {\r\n    event.preventDefault();\r\n    let controlledInput = role === 'inc' ? button.previousElementSibling : button.nextElementSibling;\r\n    let step = role === 'inc' ? controlledInput.step : -controlledInput.step;\r\n    let [number, rest] = controlledInput.value.split(' ');\r\n    let newNumber = incValue(number, step);\r\n    if (Number(newNumber) <= Number(controlledInput.max) && Number(newNumber) >= Number(controlledInput.min)) {\r\n        controlledInput.value = rest ? newNumber + ` ${rest}` : newNumber;\r\n    }\r\n};\r\n\r\n/*   Запрет на ввод символов не являющихся цифрами   */\r\nlet restrictKeys = function (event) {\r\n    if (!(event.which >= 48 && event.which <= 57 || event.which === '8' || event.which === '46')) {\r\n        event.preventDefault();\r\n    }\r\n};\r\n\r\n/*   Начало игры   */\r\nstartGame.addEventListener('click', function (event) {\r\n    event.preventDefault();\r\n\r\n    let alien = document.querySelector('.settings__animated-image');\r\n    let shadow = document.querySelector('.shadow');\r\n    let themeOption = document.querySelector('.settings__theme-option:checked').value;\r\n    let speed = document.querySelector('.settings__speed-value').value.split(' ')[0];\r\n    let capacity = document.querySelector('.settings__capacity-value').value;\r\n    let quantity = document.querySelector('.settings__quantity-value').value;\r\n    let game = new CreateGame(speed, capacity, quantity, themeOption);\r\n\r\n    settings.classList.add('hide');\r\n    setTimeout(function () {\r\n        /*Таймаут для того, чтобы прошла анимация*/\r\n        gameInterface.appendChild(game.board);\r\n    }, 1000);\r\n\r\n    alien.classList.add('animation_fast');\r\n    shadow.classList.add('animation_fast');\r\n    setTimeout(function () {\r\n        /*Аналогичный таймаут*/\r\n        for (let i = 0; i < game.quantity; i++) {\r\n            (function (index) {\r\n                setTimeout(function () {\r\n                    game.numberField.innerHTML = game.number;\r\n                    game.changeNumber();\r\n                }, game.interval * index)\r\n            })(i);\r\n        }\r\n    }, 1000)\r\n});\r\n\r\nfor (let incButton of incButtons) {\r\n    incButton.addEventListener('click', inputControl.bind(null, incButton, 'inc'));\r\n}\r\n\r\nfor (let decButton of decButtons) {\r\n    decButton.addEventListener('click', inputControl.bind(null, decButton, 'dec'));\r\n}\r\n\r\nfor (let field of fields) {\r\n    field.addEventListener('keypress', restrictKeys);\r\n}"]}