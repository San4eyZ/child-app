{"version":3,"sources":["../../scripts/settingsControl.js"],"names":["document","body","classList","contains","sendData","data","url","isAsync","endCallback","errorCallback","xhr","XMLHttpRequest","open","send","onerror","onloadend","status","addButtonWaiter","element","disabled","style","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","removeButtonWaiter","undefined","openButtons","querySelectorAll","changeButtons","button","addEventListener","event","preventDefault","section","nextElementSibling","maxHeight","notify","bind","error","message","isFixed","type","TypeError","messageWindow","createElement","title","cursor","position","left","right","top","padding","textAlign","border","zIndex","backgroundColor","color","innerHTML","delayedRemoval","setTimeout","removeChild","clearTimeout","insertBefore","firstElementChild"],"mappings":"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","file":"settingsControl.js","sourcesContent":["try {\r\n    if (document.body.classList.contains('settings-body')) {\r\n        let openButtons = document.querySelectorAll('.main-settings__section-opener');\r\n        let changeButtons = document.querySelectorAll('.main-settings__change-button');\r\n\r\n        for (let button of openButtons) {\r\n            button.addEventListener('click', function (event) {\r\n                event.preventDefault();\r\n                let section = this.nextElementSibling;\r\n                if (!section.style.maxHeight) {\r\n                    section.style.maxHeight = '500px';\r\n                } else {\r\n                    section.style.maxHeight = '';\r\n                }\r\n            })\r\n        }\r\n\r\n        for (let button of changeButtons) {\r\n            button.addEventListener('click', function (event) {\r\n                event.preventDefault();\r\n                addButtonWaiter(this);\r\n                let endCallback = function () {\r\n                    removeButtonWaiter(this);\r\n                    notify(true, 'Инструкция по смене данных отправлена на вашу почту.', 'success');\r\n                }.bind(this);\r\n                let errorCallback = function () {\r\n                    removeButtonWaiter(this);\r\n                    notify(true, 'При смене данных возникла ошибка. Попробуйте еще раз.', 'failure');\r\n                }.bind(this);\r\n\r\n                sendData('test', 'https://www.example.com', true, endCallback, errorCallback);\r\n            })\r\n        }\r\n\r\n        function sendData(data, url, isAsync, endCallback, errorCallback) {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open('POST', url, isAsync);\r\n            xhr.send(data);\r\n            xhr.onerror = errorCallback;\r\n            xhr.onloadend = function () {\r\n                if (xhr.status === 200) {\r\n                    endCallback();\r\n                }\r\n            }\r\n        }\r\n\r\n        function addButtonWaiter(element) {\r\n            element.disabled = true;\r\n            element.style.backgroundImage = 'url(\"../images/loading-light.svg\")';\r\n            element.style.backgroundPosition = '5px 50%';\r\n            element.style.backgroundRepeat = 'no-repeat';\r\n            element.style.backgroundSize = '35px 35px';\r\n        }\r\n\r\n        function removeButtonWaiter(element) {\r\n            element.disabled = undefined;\r\n            element.style.backgroundImage = '';\r\n            element.style.backgroundPosition = '';\r\n            element.style.backgroundRepeat = '';\r\n            element.style.backgroundSize = '';\r\n        }\r\n    }\r\n    if (document.body.classList.contains('groups-body')) {\r\n\r\n    }\r\n} catch (error) {\r\n    notify(true, `Что-то пошло не так: ${error.message}`, 'failure');\r\n}\r\n\r\n/**\r\n * Выводит уведомление, позиционированное сверху экрана и фиксированное при необходимости, в указанный элемент\r\n * @param {Boolean} isFixed\r\n * @param {String} message\r\n * @param {String} type\r\n * @param {HTMLElement} element\r\n */\r\nfunction notify(isFixed, message, type, element = document.body) {\r\n    if (type !== 'success' && type !== 'failure' && type !== 'warning') {\r\n        throw new TypeError('Неверное имя типа. Принимаются только \"success\", \"warning\" или \"failure\"');\r\n    }\r\n    let messageWindow = document.createElement('div');\r\n    messageWindow.title = 'Скрыть';\r\n    messageWindow.style.cursor = 'pointer';\r\n    messageWindow.style.position = 'fixed';\r\n    if (!isFixed) {\r\n        messageWindow.style.position = 'absolute';\r\n    }\r\n    messageWindow.style.left = '0';\r\n    messageWindow.style.right = '0';\r\n    messageWindow.style.top = '0';\r\n    messageWindow.style.padding = '10px';\r\n    messageWindow.style.textAlign = 'center';\r\n    messageWindow.style.border = '2px solid';\r\n    messageWindow.style.zIndex = '20';\r\n    messageWindow.style.backgroundColor = type === 'success' ? '#6eff95' : type === 'failure' ? '#ff0000' : '#fcff5a';\r\n    messageWindow.style.color = type === 'success' ? '#00a919' : type === 'failure' ? '#850000' : '#de8004';\r\n    messageWindow.innerHTML = message;\r\n    let delayedRemoval = setTimeout(function () {\r\n        element.removeChild(messageWindow);\r\n    }, 5000);\r\n    messageWindow.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        element.removeChild(messageWindow);\r\n        clearTimeout(delayedRemoval);\r\n    });\r\n    element.insertBefore(messageWindow, element.firstElementChild);\r\n}\r\n"]}