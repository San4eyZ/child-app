{"version":3,"sources":["../../scripts/settingsControl.js"],"names":["document","body","classList","contains","sendData","data","url","isAsync","successCallback","errorCallback","xhr","XMLHttpRequest","open","send","onerror","onloadend","status","addButtonWaiter","element","disabled","style","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","removeButtonWaiter","undefined","openButtons","querySelectorAll","changeButtons","button","addEventListener","event","preventDefault","section","nextElementSibling","maxHeight","endCallback","notify","bind","error","message","bgColors","success","failure","warning","colors","isFixed","type","TypeError","messageWindow","createElement","title","cursor","position","left","right","top","padding","textAlign","border","zIndex","backgroundColor","color","innerHTML","delayedRemoval","setTimeout","removeChild","clearTimeout","insertBefore","firstElementChild"],"mappings":"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","file":"settingsControl.js","sourcesContent":["try {\r\n    if (document.body.classList.contains('settings-body')) {\r\n        let openButtons = document.querySelectorAll('.main-settings__section-opener');\r\n        let changeButtons = document.querySelectorAll('.main-settings__change-button');\r\n\r\n        for (let button of openButtons) {\r\n            button.addEventListener('click', function (event) {\r\n                event.preventDefault();\r\n                let section = this.nextElementSibling;\r\n                if (!section.style.maxHeight) {\r\n                    section.style.maxHeight = '500px';\r\n                } else {\r\n                    section.style.maxHeight = '';\r\n                }\r\n            })\r\n        }\r\n\r\n        for (let button of changeButtons) {\r\n            button.addEventListener('click', function (event) {\r\n                event.preventDefault();\r\n                addButtonWaiter(this);\r\n                let endCallback = function () {\r\n                    removeButtonWaiter(this);\r\n                    notify(true, 'Инструкция по смене данных отправлена на вашу почту.', 'success');\r\n                }.bind(this);\r\n                let errorCallback = function () {\r\n                    removeButtonWaiter(this);\r\n                    notify(true, 'При смене данных возникла ошибка. Попробуйте еще раз.', 'failure');\r\n                }.bind(this);\r\n\r\n                sendData('test', 'https://www.example.com', true, endCallback, errorCallback);\r\n            })\r\n        }\r\n\r\n        function sendData(data, url, isAsync, successCallback, errorCallback) {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open('POST', url, isAsync);\r\n            xhr.send(data);\r\n            xhr.onerror = errorCallback;\r\n            xhr.onloadend = function () {\r\n                if (xhr.status === 200) {\r\n                    successCallback();\r\n                } else {\r\n                    errorCallback();\r\n                }\r\n            }\r\n        }\r\n\r\n        function addButtonWaiter(element) {\r\n            element.disabled = true;\r\n            element.style.backgroundImage = 'url(\"../images/loading-light.svg\")';\r\n            element.style.backgroundPosition = '5px 50%';\r\n            element.style.backgroundRepeat = 'no-repeat';\r\n            element.style.backgroundSize = '35px 35px';\r\n        }\r\n\r\n        function removeButtonWaiter(element) {\r\n            element.disabled = undefined;\r\n            element.style.backgroundImage = '';\r\n            element.style.backgroundPosition = '';\r\n            element.style.backgroundRepeat = '';\r\n            element.style.backgroundSize = '';\r\n        }\r\n    }\r\n} catch (error) {\r\n    notify(true, `Что-то пошло не так: ${error.message}`, 'failure');\r\n}\r\n\r\nlet bgColors = {\r\n    success: '#6eff95',\r\n    failure: '#ff0000',\r\n    warning: '#fcff5a'\r\n};\r\nlet colors = {\r\n    success: '#00a919',\r\n    failure: '#850000',\r\n    warning: '#de8004'\r\n};\r\n\r\n/**\r\n * Выводит уведомление, позиционированное сверху экрана и фиксированное при необходимости, в указанный элемент\r\n * @param {Boolean} isFixed\r\n * @param {String} message\r\n * @param {String} type\r\n * @param {HTMLElement} element\r\n */\r\nfunction notify(isFixed, message, type, element = document.body) {\r\n    if (type !== 'success' && type !== 'failure' && type !== 'warning') {\r\n        throw new TypeError('Неверное имя типа. Принимаются только \"success\", \"warning\" или \"failure\"');\r\n    }\r\n    let messageWindow = document.createElement('div');\r\n    messageWindow.title = 'Скрыть';\r\n    messageWindow.style.cursor = 'pointer';\r\n    messageWindow.style.position = 'fixed';\r\n    if (!isFixed) {\r\n        messageWindow.style.position = 'absolute';\r\n    }\r\n    messageWindow.style.left = '0';\r\n    messageWindow.style.right = '0';\r\n    messageWindow.style.top = '0';\r\n    messageWindow.style.padding = '10px';\r\n    messageWindow.style.textAlign = 'center';\r\n    messageWindow.style.border = '2px solid';\r\n    messageWindow.style.zIndex = '20';\r\n    messageWindow.style.backgroundColor = bgColors[type];\r\n    messageWindow.style.color = colors[type];\r\n    messageWindow.innerHTML = message;\r\n    let delayedRemoval = setTimeout(function () {\r\n        element.removeChild(messageWindow);\r\n    }, 5000);\r\n    messageWindow.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        element.removeChild(messageWindow);\r\n        clearTimeout(delayedRemoval);\r\n    });\r\n    element.insertBefore(messageWindow, element.firstElementChild);\r\n}\r\n"]}