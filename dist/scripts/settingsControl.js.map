{"version":3,"sources":["../../scripts/settingsControl.js"],"names":["openButtons","document","querySelectorAll","changeButtons","button","addEventListener","event","preventDefault","section","nextElementSibling","style","maxHeight","addButtonWaiter","endCallback","removeButtonWaiter","notify","parentElement","bind","errorCallback","sendData","data","url","isAsync","xhr","XMLHttpRequest","open","send","onerror","onloadend","status","element","disabled","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","undefined","message","type","TypeError","messageWindow","createElement","title","cursor","position","left","right","top","padding","textAlign","border","backgroundColor","color","innerHTML","delayedRemoval","setTimeout","removeChild","clearTimeout","insertBefore","firstElementChild"],"mappings":"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","file":"settingsControl.js","sourcesContent":["let openButtons = document.querySelectorAll('.main-settings__section-opener');\r\nlet changeButtons = document.querySelectorAll('.main-settings__change-button');\r\n\r\nfor (let button of openButtons) {\r\n    button.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        let section = this.nextElementSibling;\r\n        if (!section.style.maxHeight) {\r\n            section.style.maxHeight = '500px';\r\n        } else {\r\n            section.style.maxHeight = '';\r\n        }\r\n    })\r\n}\r\n\r\nfor (let button of changeButtons) {\r\n    button.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        addButtonWaiter(this);\r\n        let endCallback = function () {\r\n            removeButtonWaiter(this);\r\n            notify(this.parentElement, 'Инструкция по смене данных отправлена на вашу почту.', 'success');\r\n        }.bind(this);\r\n        let errorCallback = function () {\r\n            removeButtonWaiter(this);\r\n            notify(this.parentElement, 'При смене данных возникла ошибка. Попробуйте еще раз.', 'failure');\r\n        }.bind(this);\r\n\r\n        sendData('test', 'https://www.example.com', true, endCallback, errorCallback);\r\n    })\r\n}\r\n\r\nfunction sendData(data, url, isAsync, endCallback, errorCallback) {\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.open('POST', url, isAsync);\r\n    xhr.send(data);\r\n    xhr.onerror = errorCallback;\r\n    xhr.onloadend = function () {\r\n        if (xhr.status === 404) {\r\n            errorCallback();\r\n        }\r\n        if (xhr.status === 200) {\r\n            endCallback();\r\n        }\r\n    }\r\n}\r\n\r\nfunction addButtonWaiter(element) {\r\n    element.disabled = true;\r\n    element.style.backgroundImage = 'url(\"../images/loading.svg\")';\r\n    element.style.backgroundPosition = '5px 50%';\r\n    element.style.backgroundRepeat = 'no-repeat';\r\n    element.style.backgroundSize = '35px 35px';\r\n}\r\n\r\nfunction removeButtonWaiter(element) {\r\n    element.disabled = undefined;\r\n    element.style.backgroundImage = '';\r\n    element.style.backgroundPosition = '';\r\n    element.style.backgroundRepeat = '';\r\n    element.style.backgroundSize = '';\r\n}\r\n\r\nfunction notify(element, message, type) {\r\n    if (type !== 'success' && type !== 'failure' && type !== 'warning') {\r\n        throw new TypeError();\r\n    }\r\n    let messageWindow = document.createElement('div');\r\n    messageWindow.title = 'Скрыть';\r\n    messageWindow.style.cursor = 'pointer';\r\n    messageWindow.style.position = 'fixed';\r\n    messageWindow.style.left = '0';\r\n    messageWindow.style.right = '0';\r\n    messageWindow.style.top = '0';\r\n    messageWindow.style.padding = '10px';\r\n    messageWindow.style.textAlign = 'center';\r\n    messageWindow.style.border = '2px solid';\r\n    messageWindow.style.backgroundColor = type === 'success' ? '#6eff95' : type === 'failure' ? '#ff0000' : '#fcff5a';\r\n    messageWindow.style.color = type === 'success' ? '#00a919' : type === 'failure' ? '#850000' : '#de8004';\r\n    messageWindow.innerHTML = message;\r\n    let delayedRemoval = setTimeout(function () {\r\n        element.removeChild(messageWindow);\r\n    }, 5000);\r\n    messageWindow.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        element.removeChild(messageWindow);\r\n        clearTimeout(delayedRemoval);\r\n    });\r\n    element.insertBefore(messageWindow, element.firstElementChild);\r\n\r\n}\r\n"]}