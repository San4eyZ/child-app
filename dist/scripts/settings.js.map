{"version":3,"sources":["../../scripts/settings.js"],"names":["CreateGame","interval","capacity","quantity","themeNumber","Number","collection","number","Math","floor","random","length","sum","board","createBoard","numberField","querySelector","changeNumber","rand","splice","document","createElement","heading","closeButton","restartButton","fullscreenOn","fullscreenOff","numberHolder","className","innerHTML","appendChild","startGame","settings","gameInterface","incButtons","querySelectorAll","decButtons","fields","incValue","value","amount","round","inputControl","button","role","event","preventDefault","controlledInput","previousElementSibling","nextElementSibling","step","split","rest","newNumber","max","min","restrictKeys","which","addEventListener","themeOption","speed","game","classList","add","setTimeout","i","index","incButton","bind","decButton","field"],"mappings":"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","file":"settings.js","sourcesContent":["/*  Создание игры  */\r\nfunction CreateGame(interval, capacity, quantity, themeNumber) {\r\n    this.interval = Number(interval) * 1000;\r\n    this.quantity = Number(quantity);\r\n    this.capacity = Number(capacity);\r\n    this.themeNumber = Number(themeNumber);\r\n    this.collection = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\r\n    this.number = this.collection[Math.floor(Math.random() * this.collection.length)];\r\n    this.sum = this.number;\r\n    this.board = createBoard();\r\n    this.numberField = this.board.querySelector('.game__number');\r\n    this.changeNumber = function () {\r\n        if (this.collection.length) {\r\n            let rand = Math.floor(Math.random() * this.collection.length);\r\n            this.sum += this.number;\r\n            this.number = this.collection[rand];\r\n            this.collection.splice(rand, 1);\r\n        } else {\r\n            this.number = -1;\r\n        }\r\n    }\r\n}\r\n\r\nfunction createBoard() {\r\n    let board = document.createElement('div');\r\n    let heading = document.createElement('h2');\r\n    let closeButton = document.createElement('button');\r\n    let restartButton = document.createElement('button');\r\n    let fullscreenOn = document.createElement('button');\r\n    let fullscreenOff = document.createElement('button');\r\n    let numberHolder = document.createElement('div');\r\n    board.className = 'game-board';\r\n    heading.innerHTML = 'Вперед!';\r\n    heading.className = 'game__heading';\r\n    restartButton.className = 'game__button game__restart-button';\r\n    restartButton.innerHTML = 'Заново';\r\n    closeButton.className = 'game__button game__close-button';\r\n    closeButton.innerHTML = 'Закончить';\r\n    fullscreenOn.className = 'game__button game__fullscreen-on d-none d-md-block';\r\n    fullscreenOff.className = 'game__button game__fullscreen-off';\r\n    numberHolder.className = 'game__number';\r\n    numberHolder.innerHTML = '1234567';\r\n    board.appendChild(heading);\r\n    board.appendChild(numberHolder);\r\n    board.appendChild(restartButton);\r\n    board.appendChild(closeButton);\r\n    board.appendChild(fullscreenOn);\r\n\r\n    return board;\r\n}\r\n\r\nlet startGame = document.querySelector('.settings__start-game');\r\nlet settings = document.querySelector('.settings__main-window');\r\nlet gameInterface = document.querySelector('.game-interface');\r\n\r\nlet incButtons = document.querySelectorAll('.button_inc');\r\nlet decButtons = document.querySelectorAll('.button_dec');\r\nlet fields = document.querySelectorAll('.settings__input');\r\n\r\nlet incValue = function (value, amount) {\r\n    return `${Math.round((Number(value) + Number(amount)) * 10) / 10}`;\r\n};\r\n\r\n/*   Контроль полей ввода   */\r\nlet inputControl = function (button, role, event) {\r\n    event.preventDefault();\r\n    let controlledInput = role === 'inc' ? button.previousElementSibling : button.nextElementSibling;\r\n    let step = role === 'inc' ? controlledInput.step : -controlledInput.step;\r\n    let [number, rest] = controlledInput.value.split(' ');\r\n    let newNumber = incValue(number, step);\r\n    if (Number(newNumber) <= Number(controlledInput.max) && Number(newNumber) >= Number(controlledInput.min)) {\r\n        controlledInput.value = rest ? newNumber + ` ${rest}` : newNumber;\r\n    }\r\n};\r\n\r\n/*   Запрет на ввод символов не являющихся цифрами   */\r\nlet restrictKeys = function (event) {\r\n    if (!(event.which >= 48 && event.which <= 57 || event.which === '8' || event.which === '46')) {\r\n        event.preventDefault();\r\n    }\r\n};\r\n\r\n/*   Начало игры   */\r\nstartGame.addEventListener('click', function (event) {\r\n    event.preventDefault();\r\n\r\n    let themeOption = document.querySelector('.settings__theme-option:checked').value;\r\n    let speed = document.querySelector('.settings__speed-value').value.split(' ')[0];\r\n    let capacity = document.querySelector('.settings__capacity-value').value;\r\n    let quantity = document.querySelector('.settings__quantity-value').value;\r\n    let game = new CreateGame(speed, capacity, quantity, themeOption);\r\n\r\n    settings.classList.add('hide');\r\n    setTimeout(function () {\r\n        /*Таймаут для того, чтобы прошла анимация*/\r\n        gameInterface.appendChild(game.board);\r\n    }, 1000);\r\n\r\n    setTimeout(function () {\r\n        /*Аналогичный таймаут*/\r\n        for (let i = 0; i < game.quantity; i++) {\r\n            (function (index) {\r\n                setTimeout(function () {\r\n                    game.numberField.innerHTML = game.number;\r\n                    game.changeNumber();\r\n                }, game.interval * index)\r\n            })(i);\r\n        }\r\n    }, 1000)\r\n});\r\n\r\nfor (let incButton of incButtons) {\r\n    incButton.addEventListener('click', inputControl.bind(null, incButton, 'inc'));\r\n}\r\n\r\nfor (let decButton of decButtons) {\r\n    decButton.addEventListener('click', inputControl.bind(null, decButton, 'dec'));\r\n}\r\n\r\nfor (let field of fields) {\r\n    field.addEventListener('keypress', restrictKeys);\r\n}"]}