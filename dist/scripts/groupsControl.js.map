{"version":3,"sources":["../../scripts/groupsControl.js"],"names":["document","body","classList","contains","getGroupsData","url","Promise","resolve","reject","xhr","XMLHttpRequest","overrideMimeType","open","onload","status","JSON","parse","responseText","groups","Error","onerror","send","createGroup","groupObj","groupHolder","createElement","add","group","innerHTML","id","name","students","forEach","createStudent","student","appendChild","el","studentObj","studentRadioContainer","studentLabelContainer","firstElementChild","createPersonalTable","tableData","thead","tbody","table","className","line","number","row","success","theme","speed","capacity","quantity","rating","loadingPlaceholder","groupsListElement","querySelector","promiseGroupList","window","location","origin","then","removeChild","groupList","querySelectorAll","studentRadios","placeForData","radio","addEventListener","checked","replaceChild","data","style","animationName","animationDuration","showGroup","height","reduce","init","cur","computedStyle","getComputedStyle","parseInt","marginTop","marginBottom","borderTopWidth","borderBottomWidth","maxHeight","String"],"mappings":"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","file":"groupsControl.js","sourcesContent":["if (document.body.classList.contains('groups-body')) {\r\n    let loadingPlaceholder = document.createElement('div');\r\n    loadingPlaceholder.innerHTML = '<div class=\"loading-placeholder\"></div>';\r\n    loadingPlaceholder = loadingPlaceholder.firstElementChild;\r\n\r\n    let groupsListElement = document.querySelector('.groups__list');\r\n\r\n    let promiseGroupList = getGroupsData(`${window.location.origin}/testData/groupList.json`);\r\n    promiseGroupList.then(groupList => {\r\n        groupsListElement.removeChild(groupsListElement.firstElementChild);\r\n        groupList.forEach(group => groupsListElement.appendChild(createGroup(group)));\r\n\r\n        let groups = document.querySelectorAll('.group-holder');\r\n        let studentRadios = document.querySelectorAll('.student__radio');\r\n        let placeForData = document.querySelector('.action-place');\r\n\r\n        [...studentRadios].forEach(radio => radio.addEventListener('change', function () {\r\n            if (this.checked) {\r\n                placeForData.replaceChild(loadingPlaceholder, placeForData.firstElementChild);\r\n                let xhr = new XMLHttpRequest();\r\n                xhr.overrideMimeType('application/json');\r\n                xhr.open('GET', `${window.location.origin}/testData/statsTable.json`, true);\r\n                xhr.onload = function () {\r\n                    if (xhr.status === 200) {\r\n                        let table = createPersonalTable(JSON.parse(xhr.responseText).data);\r\n                        table.style.animationName = 'fade';\r\n                        table.style.animationDuration = '1s';\r\n                        placeForData.replaceChild(table, placeForData.firstElementChild);\r\n                    } else {\r\n                        throw new Error(`Ошибка получения информации о группах (${xhr.status})`);\r\n                    }\r\n                };\r\n                xhr.onerror = function () {\r\n                    throw new Error(`Ошибка получения информации о группах (${xhr.status})`);\r\n                };\r\n                xhr.send();\r\n            }\r\n        }));\r\n        [...groups].forEach(group => {\r\n            let groupList = group.querySelector('.group');\r\n            let students = groupList.querySelectorAll('.group__student');\r\n            let showGroup = group.querySelector('.group__checkbox');\r\n            let height = [...students].reduce((init, cur) => {\r\n                let computedStyle = window.getComputedStyle(cur);\r\n                return init + parseInt(computedStyle.height) +\r\n                    parseInt(computedStyle.marginTop) +\r\n                    parseInt(computedStyle.marginBottom) +\r\n                    parseInt(computedStyle.borderTopWidth) +\r\n                    parseInt(computedStyle.borderBottomWidth);\r\n            }, 0);\r\n            showGroup.addEventListener('change', function () {\r\n                if (this.checked) {\r\n                    groupList.style.maxHeight = String(height) + 'px';\r\n                }\r\n                else {\r\n                    groupList.style.maxHeight = '0';\r\n                }\r\n            })\r\n        });\r\n    });\r\n\r\n    function getGroupsData(url) {\r\n        return new Promise(function (resolve, reject) {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.overrideMimeType('application/json');\r\n            xhr.open('GET', url, true);\r\n            xhr.onload = function () {\r\n                if (xhr.status === 200) {\r\n                    resolve(JSON.parse(xhr.responseText).groups);\r\n                }\r\n                else {\r\n                    reject(new Error(`Ошибка получения информации о группах (${xhr.status})`));\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                reject(new Error(`Ошибка получения информации о группах (${xhr.status})`));\r\n            };\r\n            xhr.send();\r\n        })\r\n    }\r\n\r\n    function createGroup(groupObj) {\r\n        let groupHolder = document.createElement('div');\r\n        groupHolder.classList.add('group-holder');\r\n        let group = document.createElement('div');\r\n        group.classList.add('group');\r\n        groupHolder.innerHTML =\r\n            `<input class=\"group__checkbox\" type=\"checkbox\" name=\"group\" id=\"group-${groupObj.id}\">\r\n             <label class=\"group__name\" for=\"group-${groupObj.id}\">${groupObj.name}</label>`;\r\n        groupObj.students.forEach(student => createStudent(student).forEach(el => group.appendChild(el)));\r\n        groupHolder.appendChild(group);\r\n\r\n        return groupHolder;\r\n    }\r\n    \r\n    function createStudent(studentObj) {\r\n        let studentRadioContainer = document.createElement('div');\r\n        let studentLabelContainer = document.createElement('div');\r\n        studentRadioContainer.innerHTML = `<input type=\"radio\" name=\"student\" id=\"student-${studentObj.id}\" class=\"student__radio\">`;\r\n        studentLabelContainer.innerHTML = `<label for=\"student-${studentObj.id}\" class=\"group__student\">${studentObj.name}</label>`;\r\n\r\n        return [studentRadioContainer.firstElementChild, studentLabelContainer.firstElementChild];\r\n    }\r\n    \r\n    function createPersonalTable(tableData) {\r\n        let thead = document.createElement('thead');\r\n        let tbody = document.createElement('tbody');\r\n        let table = document.createElement('table');\r\n        table.className = 'stats__table table_light-theme';\r\n        thead.innerHTML = '<tr class=\"stats__row\"><th class=\"stats__data table_light-theme font-weight-bold\">№</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Результат</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Тема</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Скорость</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Разрядность</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Количество</th>' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Тип рейтинга</th>' +\r\n            '</tr>';\r\n        tableData.forEach((line, number) => {\r\n            let row = document.createElement('tr');\r\n            row.innerHTML = `<td class=\"stats__data table_light-theme\">${number + 1}</td>\r\n            <td class=\"stats__data table_light-theme ${line.success ? 'success' : 'failure'}\">${line.success ? 'Успех' : 'Неудача'}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.theme}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.speed + 'сек'}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.capacity}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.quantity}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.rating}</td>`;\r\n            tbody.appendChild(row);\r\n        });\r\n        table.appendChild(thead);\r\n        table.appendChild(tbody);\r\n        return table;\r\n    }\r\n}"]}