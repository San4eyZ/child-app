{"version":3,"sources":["../../scripts/groupsControl.js"],"names":["document","body","classList","contains","getGroupsData","url","Promise","resolve","reject","xhr","XMLHttpRequest","overrideMimeType","open","onload","status","JSON","parse","responseText","groups","Error","onerror","send","createGroup","groupObj","groupHolder","createElement","add","group","id","free","innerHTML","freeStudents","groupsListForRed","length","deleteButton","querySelector","redButton","addEventListener","event","preventDefault","toDelete","confirm","window","location","origin","reload","notify","indexToDelete","indexOf","groupToDelete","splice","students","push","stringify","nameChanger","value","parentElement","name","changeButton","list","makeListForSelect","enteredName","firstElementChild","allStudents","children","selectedStudents","filter","opt","selected","map","studentObj","unseectedStudents","holder","createGroupChangingInterface","placeForData","replaceChild","forEach","createStudent","student","appendChild","el","studentRadioContainer","studentLabelContainer","createPersonalTable","tableData","thead","tbody","table","className","line","number","row","success","theme","speed","capacity","quantity","rating","multiple","makeOptions","isSelected","option","button","Object","assign","style","animationName","animationDuration","loadingPlaceholder","createButton","groupsListElement","promiseGroupList","then","groupList","removeChild","insertBefore","lastElementChild","querySelectorAll","studentRadios","radio","checked","setRequestHeader","data","showGroup","height","calculateHeight","maxHeight","String","disabled","placeholder","evt","newGroup","freeGroup","pop","catch","err","message","bgColors","failure","warning","colors","isFixed","type","element","TypeError","messageWindow","title","notifyStyles","left","right","top","padding","textAlign","border","zIndex","backgroundColor","color","cursor","position","delayedRemoval","setTimeout","clearTimeout","reduce","init","cur","computedStyle","getComputedStyle","parseInt","marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingBottom","paddingTop"],"mappings":";;;;AAAA,IAAIA,SAASC,IAAT,CAAcC,SAAd,CAAwBC,QAAxB,CAAiC,aAAjC,CAAJ,EAAqD;AAAA,QAsHxCC,aAtHwC,GAsHjD,SAASA,aAAT,CAAuBC,GAAvB,EAA4B;AACxB,eAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,gBAAIC,MAAM,IAAIC,cAAJ,EAAV;AACAD,gBAAIE,gBAAJ,CAAqB,kBAArB;AACAF,gBAAIG,IAAJ,CAAS,KAAT,EAAgBP,GAAhB,EAAqB,IAArB;AACAI,gBAAII,MAAJ,GAAa,YAAY;AACrB,oBAAIJ,IAAIK,MAAJ,KAAe,GAAnB,EAAwB;AACpBP,4BAAQQ,KAAKC,KAAL,CAAWP,IAAIQ,YAAf,EAA6BC,MAArC;AACH,iBAFD,MAGK;AACDV,2BAAO,IAAIW,KAAJ,kNAAoDV,IAAIK,MAAxD,OAAP;AACH;AACJ,aAPD;AAQAL,gBAAIW,OAAJ,GAAc,YAAY;AACtBZ,uBAAO,IAAIW,KAAJ,kNAAoDV,IAAIK,MAAxD,OAAP;AACH,aAFD;AAGAL,gBAAIY,IAAJ;AACH,SAhBM,CAAP;AAiBH,KAxIgD;;AAAA,QA0IxCC,WA1IwC,GA0IjD,SAASA,WAAT,CAAqBC,QAArB,EAA+B;AAC3B,YAAIC,cAAcxB,SAASyB,aAAT,CAAuB,KAAvB,CAAlB;AACAD,oBAAYtB,SAAZ,CAAsBwB,GAAtB,CAA0B,cAA1B;AACA,YAAIC,QAAQ3B,SAASyB,aAAT,CAAuB,KAAvB,CAAZ;AACAE,cAAMC,EAAN,GAAWL,SAASK,EAApB;AACAD,cAAMJ,QAAN,GAAiBA,QAAjB;AACAI,cAAMzB,SAAN,CAAgBwB,GAAhB,CAAoB,OAApB;AACA,YAAI,CAACH,SAASM,IAAd,EAAoB;AAChBF,kBAAMG,SAAN;;AAIA,gBAAIC,eAAeC,iBAAiBA,iBAAiBC,MAAjB,GAA0B,CAA3C,CAAnB;;AAEA,gBAAIC,eAAeP,MAAMQ,aAAN,CAAoB,qBAApB,CAAnB;AACA,gBAAIC,YAAYT,MAAMQ,aAAN,CAAoB,kBAApB,CAAhB;;AAEA;AACAD,yBAAaG,gBAAb,CAA8B,OAA9B,EAAuC,UAAUC,KAAV,EAAiB;AACpDA,sBAAMC,cAAN;AACA,oBAAIC,WAAWC,QAAQ,yCAAR,CAAf;AACA,oBAAID,QAAJ,EAAc;AAAA;;AACV,wBAAI/B,MAAM,IAAIC,cAAJ,EAAV;AACAD,wBAAIE,gBAAJ,CAAqB,kBAArB;AACAF,wBAAIG,IAAJ,CAAS,MAAT,EAAoB8B,OAAOC,QAAP,CAAgBC,MAApC,8BAAqE,IAArE;AACAnC,wBAAII,MAAJ,GAAa,YAAW;AACpB,4BAAIJ,IAAIK,MAAJ,KAAe,GAAnB,EAAwB;AACpB6B,qCAASE,MAAT,CAAgB,IAAhB;AACH,yBAFD,MAEO;AACHC,mCAAO,IAAP,qKAA8C,SAA9C;AACH;AACJ,qBAND;AAOA;AACA,wBAAIC,gBAAgBf,iBAAiBgB,OAAjB,CAAyBzB,QAAzB,CAApB;AACA;AACA,wBAAI0B,gBAAgBjB,iBAAiBkB,MAAjB,CAAwBH,aAAxB,EAAuC,CAAvC,EAA0C,CAA1C,CAApB;AACA;AACA,0DAAaI,QAAb,EAAsBC,IAAtB,iDAA8BH,cAAcE,QAA5C;AACA;AACA1C,wBAAIY,IAAJ,CAASN,KAAKsC,SAAL,CAAerB,gBAAf,CAAT;AACH;AACJ,aAvBD;;AAyBAI,sBAAUC,gBAAV,CAA2B,OAA3B,EAAoC,UAAUC,KAAV,EAAiB;AACjDA,sBAAMC,cAAN;;AAEA,oBAAIe,cAActD,SAASyB,aAAT,CAAuB,OAAvB,CAAlB;AACA6B,4BAAYC,KAAZ,GAAoB,KAAKC,aAAL,CAAmBjC,QAAnB,CAA4BkC,IAAhD;AACAH,4BAAYpD,SAAZ,CAAsBwB,GAAtB,CAA0B,mBAA1B,EAA+C,uCAA/C;;AAEA,oBAAIgC,eAAe1D,SAASyB,aAAT,CAAuB,QAAvB,CAAnB;AACAiC,6BAAaxD,SAAb,CAAuBwB,GAAvB,CAA2B,mBAA3B,EAAgD,8BAAhD;;AAEA,oBAAIiC,OAAOC,kBAAkB,KAAKJ,aAAL,CAAmBjC,QAArC,CAAX;AACAoC,qBAAKzD,SAAL,CAAewB,GAAf,CAAmB,+BAAnB;;AAEAgC,6BAAa5B,SAAb,GAAyB,iBAAzB;AACA4B,6BAAarB,gBAAb,CAA8B,OAA9B,EAAuC,UAAUC,KAAV,EAAiB;AACpDA,0BAAMC,cAAN;AACA,wBAAIsB,cAAc,KAAKL,aAAL,CAAmBM,iBAAnB,CAAqCP,KAAvD;AACA,wBAAIM,WAAJ,EAAiB;AACb,4BAAIpD,MAAM,IAAIC,cAAJ,EAAV;AACAD,4BAAIE,gBAAJ,CAAqB,kBAArB;AACAF,4BAAIG,IAAJ,CAAS,MAAT,EAAoB8B,OAAOC,QAAP,CAAgBC,MAApC,8BAAqE,IAArE;AACAnC,4BAAII,MAAJ,GAAa,YAAY;AACrB,gCAAIJ,IAAIK,MAAJ,KAAe,GAAnB,EAAwB;AACpB6B,yCAASE,MAAT,CAAgB,IAAhB;AACH,6BAFD,MAEO;AACHC,uCAAO,IAAP,yMAAoD,SAApD;AACH;AACJ,yBAND;;AAQA,4BAAIiB,2CAAkBJ,KAAKK,QAAvB,EAAJ;AACA,4BAAIC,mBAAmBF,YAAYG,MAAZ,CAAmB;AAAA,mCAAOC,IAAIC,QAAX;AAAA,yBAAnB,EAAwCC,GAAxC,CAA4C;AAAA,gCAAEC,UAAF,SAAEA,UAAF;AAAA,mCAAkBA,UAAlB;AAAA,yBAA5C,CAAvB;AACA,4BAAIC,oBAAoBR,YAAYG,MAAZ,CAAmB;AAAA,mCAAO,CAACC,IAAIC,QAAZ;AAAA,yBAAnB,EAAyCC,GAAzC,CAA6C;AAAA,gCAAEC,UAAF,SAAEA,UAAF;AAAA,mCAAkBA,UAAlB;AAAA,yBAA7C,CAAxB;;AAEA/C,iCAAS4B,QAAT,GAAoBc,gBAApB;AACAjC,yCAAiBA,iBAAiBC,MAAjB,GAAyB,CAA1C,EAA6CkB,QAA7C,GAAwDoB,iBAAxD;AACAhD,iCAASkC,IAAT,GAAgBI,WAAhB;AACApD,4BAAIY,IAAJ,CAASN,KAAKsC,SAAL,CAAerB,gBAAf,CAAT;AACH,qBApBD,MAoBO;AACHc,+BAAO,IAAP,EAAa,+BAAb,EAA8C,SAA9C;AACH;AAGJ,iBA5BD;;AA8BA,oBAAI0B,SAASC,6BAA6BnB,WAA7B,EAA0CK,IAA1C,EAAgDD,YAAhD,CAAb;;AAEAgB,6BAAaC,YAAb,CAA0BH,MAA1B,EAAkCE,aAAaZ,iBAA/C;AACH,aA/CD;AAgDH;AACDtC,oBAAYM,SAAZ,8EAC6EP,SAASK,EADtF,+DAE6CL,SAASK,EAFtD,UAE6DL,SAASkC,IAFtE;AAGAlC,iBAAS4B,QAAT,CAAkByB,OAAlB,CAA0B;AAAA,mBAAWC,cAAcC,OAAd,EAAuBF,OAAvB,CAA+B;AAAA,uBAAMjD,MAAMoD,WAAN,CAAkBC,EAAlB,CAAN;AAAA,aAA/B,CAAX;AAAA,SAA1B;AACAxD,oBAAYuD,WAAZ,CAAwBpD,KAAxB;;AAEA,eAAOH,WAAP;AACH,KA7OgD;;AAAA,QA+OxCqD,aA/OwC,GA+OjD,SAASA,aAAT,CAAuBP,UAAvB,EAAmC;AAC/B,YAAIW,wBAAwBjF,SAASyB,aAAT,CAAuB,KAAvB,CAA5B;AACA,YAAIyD,wBAAwBlF,SAASyB,aAAT,CAAuB,KAAvB,CAA5B;AACAwD,8BAAsBnD,SAAtB,uDAAoFwC,WAAW1C,EAA/F;AACAsD,8BAAsBpD,SAAtB,4BAAyDwC,WAAW1C,EAApE,iCAAkG0C,WAAWb,IAA7G;;AAEA,eAAO,CAACwB,sBAAsBnB,iBAAvB,EAA0CoB,sBAAsBpB,iBAAhE,CAAP;AACH,KAtPgD;;AAAA,QAwPxCqB,mBAxPwC,GAwPjD,SAASA,mBAAT,CAA6BC,SAA7B,EAAwC;AACpC,YAAIC,QAAQrF,SAASyB,aAAT,CAAuB,OAAvB,CAAZ;AACA,YAAI6D,QAAQtF,SAASyB,aAAT,CAAuB,OAAvB,CAAZ;AACA,YAAI8D,QAAQvF,SAASyB,aAAT,CAAuB,OAAvB,CAAZ;AACA8D,cAAMC,SAAN,GAAkB,gCAAlB;AACAH,cAAMvD,SAAN,GAAkB,+FACd,6EADc,GAEd,wEAFc,GAGd,4EAHc,GAId,+EAJc,GAKd,4EALc,GAMd,8EANc,GAOd,OAPJ;AAQAsD,kBAAUR,OAAV,CAAkB,UAACa,IAAD,EAAOC,MAAP,EAAkB;AAChC,gBAAIC,MAAM3F,SAASyB,aAAT,CAAuB,IAAvB,CAAV;AACAkE,gBAAI7D,SAAJ,mDAA6D4D,SAAS,CAAtE,sEAC2CD,KAAKG,OAAL,GAAe,SAAf,GAA2B,SADtE,YACoFH,KAAKG,OAAL,GAAe,OAAf,GAAyB,SAD7G,sEAE4CH,KAAKI,KAFjD,sEAG4CJ,KAAKK,KAAL,GAAa,KAHzD,sEAI4CL,KAAKM,QAJjD,qEAK4CN,KAAKO,QALjD,qEAM4CP,KAAKQ,MANjD;AAOAX,kBAAMP,WAAN,CAAkBY,GAAlB;AACH,SAVD;AAWAJ,cAAMR,WAAN,CAAkBM,KAAlB;AACAE,cAAMR,WAAN,CAAkBO,KAAlB;AACA,eAAOC,KAAP;AACH,KAnRgD;;AAAA,QAqRxC3B,iBArRwC,GAqRjD,SAASA,iBAAT,GAAyC;AAAA,YAAdjC,KAAc,uEAAN,IAAM;;AACrC,YAAIgC,OAAO3D,SAASyB,aAAT,CAAuB,QAAvB,CAAX;AACAkC,aAAKuC,QAAL,GAAgB,IAAhB;AACA,YAAInE,eAAeC,iBAAiBA,iBAAiBC,MAAjB,GAA0B,CAA3C,EAA8CkB,QAAjE;AACA,YAAIxB,KAAJ,EAAW;AACPA,kBAAMwB,QAAN,CAAeyB,OAAf,CAAuB;AAAA,uBAAWuB,YAAYrB,OAAZ,EAAqB,IAArB,CAAX;AAAA,aAAvB;AACH;AACD/C,qBAAa6C,OAAb,CAAqB;AAAA,mBAAWuB,YAAYrB,OAAZ,CAAX;AAAA,SAArB;AACA,iBAASqB,WAAT,CAAqBrB,OAArB,EAAgD;AAAA,gBAAlBsB,UAAkB,uEAAP,KAAO;;AAC5C,gBAAIC,SAASrG,SAASyB,aAAT,CAAuB,QAAvB,CAAb;AACA4E,mBAAOvE,SAAP,GAAmBgD,QAAQrB,IAA3B;AACA4C,mBAAO/B,UAAP,GAAoBQ,OAApB;AACAuB,mBAAO9C,KAAP,GAAeuB,QAAQlD,EAAvB;AACAyE,mBAAOjC,QAAP,GAAkBgC,aAAa,IAAb,GAAoB,EAAtC;AACAzC,iBAAKoB,WAAL,CAAiBsB,MAAjB;AACH;;AAED,eAAO1C,IAAP;AACH,KAvSgD;;AAAA,QAySxCc,4BAzSwC,GAySjD,SAASA,4BAAT,CAAsCnB,WAAtC,EAAmDK,IAAnD,EAAyD2C,MAAzD,EAAiE;AAC7D,YAAI9B,SAASxE,SAASyB,aAAT,CAAuB,KAAvB,CAAb;AACA+C,eAAOtE,SAAP,CAAiBwB,GAAjB,CAAqB,yBAArB;AACA8C,eAAOO,WAAP,CAAmBzB,WAAnB;AACAkB,eAAOO,WAAP,CAAmBpB,IAAnB;AACAa,eAAOO,WAAP,CAAmBuB,MAAnB;AACAC,eAAOC,MAAP,CAAchC,OAAOiC,KAArB,EAA4B;AACxBC,2BAAe,MADS;AAExBC,+BAAmB;AAFK,SAA5B;;AAKA,eAAOnC,MAAP;AACH,KArTgD;;AACjD,QAAIoC,qBAAqB5G,SAASyB,aAAT,CAAuB,KAAvB,CAAzB;AACAmF,uBAAmBpB,SAAnB,GAA+B,qBAA/B;;AAEA,QAAIxD,yBAAJ;AACA,QAAI6E,eAAe7G,SAASmC,aAAT,CAAuB,qBAAvB,CAAnB;AACA,QAAIuC,eAAe1E,SAASmC,aAAT,CAAuB,eAAvB,CAAnB;AACA,QAAI2E,oBAAoB9G,SAASmC,aAAT,CAAuB,eAAvB,CAAxB;;AAEA,QAAI4E,mBAAmB3G,cAAiBsC,OAAOC,QAAP,CAAgBC,MAAjC,8BAAvB;AACAmE,qBAAiBC,IAAjB,CAAsB,qBAAa;AAC/BhF,2BAAmBiF,SAAnB;AACAH,0BAAkBI,WAAlB,CAA8BJ,kBAAkBhD,iBAAhD;AACAmD,kBAAUrC,OAAV,CAAkB;AAAA,mBAASkC,kBAAkBK,YAAlB,CAA+B7F,YAAYK,KAAZ,CAA/B,EAAmDmF,kBAAkBM,gBAArE,CAAT;AAAA,SAAlB;;AAEA,YAAIlG,SAASlB,SAASqH,gBAAT,CAA0B,eAA1B,CAAb;AACA,YAAIC,gBAAgBtH,SAASqH,gBAAT,CAA0B,iBAA1B,CAApB;;AAEA,qCAAIC,aAAJ,GAAmB1C,OAAnB,CAA2B;AAAA,mBAAS2C,MAAMlF,gBAAN,CAAuB,QAAvB,EAAiC,YAAY;AAC7E,oBAAI,KAAKmF,OAAT,EAAkB;AACd9C,iCAAaC,YAAb,CAA0BiC,kBAA1B,EAA8ClC,aAAaZ,iBAA3D;;AAEA,wBAAIrD,MAAM,IAAIC,cAAJ,EAAV;AACAD,wBAAIG,IAAJ,CAAS,KAAT,EAAmB8B,OAAOC,QAAP,CAAgBC,MAAnC,gCAAsE,IAAtE;AACAnC,wBAAIgH,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC;;AAEAhH,wBAAII,MAAJ,GAAa,YAAY;AACrB,4BAAIJ,IAAIK,MAAJ,KAAe,GAAnB,EAAwB;AACpB;AACA,gCAAIyE,QAAQJ,oBAAoBpE,KAAKC,KAAL,CAAWP,IAAIQ,YAAf,EAA6ByG,IAAjD,CAAZ;AACAnC,kCAAMkB,KAAN,CAAYC,aAAZ,GAA4B,MAA5B;AACAnB,kCAAMkB,KAAN,CAAYE,iBAAZ,GAAgC,IAAhC;AACAjC,yCAAaC,YAAb,CAA0BY,KAA1B,EAAiCb,aAAaZ,iBAA9C;AACH,yBAND,MAMO;AACH,kCAAM,IAAI3C,KAAJ,kNAAoDV,IAAIK,MAAxD,OAAN;AACH;AACJ,qBAVD;AAWAL,wBAAIW,OAAJ,GAAc,YAAY;AACtB,8BAAM,IAAID,KAAJ,kNAAoDV,IAAIK,MAAxD,OAAN;AACH,qBAFD;;AAIAL,wBAAIY,IAAJ;AACH;AACJ,aAzBmC,CAAT;AAAA,SAA3B;AA0BA,qCAAIH,MAAJ,GAAY0D,OAAZ,CAAoB,iBAAS;AACzB,gBAAIqC,YAAYtF,MAAMQ,aAAN,CAAoB,QAApB,CAAhB;AACA,gBAAIwF,YAAYhG,MAAMQ,aAAN,CAAoB,kBAApB,CAAhB;AACA,gBAAIyF,SAASC,gBAAgBZ,SAAhB,CAAb;;AAEAU,sBAAUtF,gBAAV,CAA2B,QAA3B,EAAqC,YAAY;AAC7C,oBAAI,KAAKmF,OAAT,EAAkB;AACdP,8BAAUR,KAAV,CAAgBqB,SAAhB,GAA4BC,OAAOH,MAAP,IAAiB,IAA7C;AACH,iBAFD,MAGK;AACDX,8BAAUR,KAAV,CAAgBqB,SAAhB,GAA4B,GAA5B;AACH;AACJ,aAPD;AAQH,SAbD;;AAeAjB,qBAAamB,QAAb,GAAwB,EAAxB;;AAEAnB,qBAAaxE,gBAAb,CAA8B,OAA9B,EAAuC,UAAUC,KAAV,EAAiB;AACpDA,kBAAMC,cAAN;;AAEA,gBAAIe,cAActD,SAASyB,aAAT,CAAuB,OAAvB,CAAlB;AACA6B,wBAAY2E,WAAZ,GAA0B,oBAA1B;AACA3E,wBAAYpD,SAAZ,CAAsBwB,GAAtB,CAA0B,mBAA1B,EAA+C,uCAA/C;;AAEA,gBAAIgC,eAAe1D,SAASyB,aAAT,CAAuB,QAAvB,CAAnB;AACAiC,yBAAa5B,SAAb,GAAyB,SAAzB;AACA4B,yBAAaxD,SAAb,CAAuBwB,GAAvB,CAA2B,mBAA3B,EAAgD,8BAAhD;;AAEAgC,yBAAarB,gBAAb,CAA8B,OAA9B,EAAuC,UAAU6F,GAAV,EAAe;AAClDA,oBAAI3F,cAAJ;AACA,oBAAIe,YAAYC,KAAhB,EAAuB;AACnB,wBAAI9C,MAAM,IAAIC,cAAJ,EAAV;AACAD,wBAAIG,IAAJ,CAAS,MAAT,EAAoB8B,OAAOC,QAAP,CAAgBC,MAApC,8BAAqE,IAArE;AACAnC,wBAAIgH,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC;;AAEAhH,wBAAII,MAAJ,GAAa,YAAY;AACrB,4BAAIJ,IAAIK,MAAJ,KAAe,GAAnB,EAAwB;AACpB6B,qCAASE,MAAT,CAAgB,IAAhB;AACH,yBAFD,MAEO;AACHC,mCAAO,IAAP,qKAA8C,SAA9C;AACH;AACJ,qBAND;;AAQA,wBAAIiB,2CAAkBJ,KAAKK,QAAvB,EAAJ;AACA,wBAAImE,WAAW;AACX1E,8BAAMH,YAAYC,KADP;AAEXJ,kCAAUY,YAAYG,MAAZ,CAAmB;AAAA,mCAAOC,IAAIC,QAAX;AAAA,yBAAnB,EAAwCC,GAAxC,CAA4C;AAAA,gCAAEC,UAAF,QAAEA,UAAF;AAAA,mCAAkBA,UAAlB;AAAA,yBAA5C;AAFC,qBAAf;AAIA,wBAAI8D,YAAY;AACZ3E,8BAAM,iBADM;AAEZ5B,8BAAM,IAFM;AAGZsB,kCAAUY,YAAYG,MAAZ,CAAmB;AAAA,mCAAO,CAACC,IAAIC,QAAZ;AAAA,yBAAnB,EAAyCC,GAAzC,CAA6C;AAAA,gCAAEC,UAAF,SAAEA,UAAF;AAAA,mCAAkBA,UAAlB;AAAA,yBAA7C;AAHE,qBAAhB;AAKAtC,qCAAiBqG,GAAjB;AACA;AACAF,6BAASvG,EAAT,GAAcI,iBAAiBA,iBAAiBC,MAAjB,GAA0B,CAA3C,EAA8CL,EAA9C,GAAmD,CAAjE;AACAI,qCAAiBoB,IAAjB,CAAsB+E,QAAtB,EAAgCC,SAAhC;AACA3H,wBAAIY,IAAJ,CAASN,KAAKsC,SAAL,CAAerB,gBAAf,CAAT;AACH,iBA5BD,MA4BO;AACHc,2BAAO,IAAP,EAAa,+BAAb,EAA8C,SAA9C;AACH;AACJ,aAjCD;;AAmCA,gBAAIa,OAAOC,mBAAX;AACAD,iBAAKzD,SAAL,CAAewB,GAAf,CAAmB,+BAAnB;;AAEA,gBAAI8C,SAASC,6BAA6BnB,WAA7B,EAA0CK,IAA1C,EAAgDD,YAAhD,CAAb;;AAEAgB,yBAAaC,YAAb,CAA0BH,MAA1B,EAAkCE,aAAaZ,iBAA/C;AACH,SApDD;AAqDH,KAxGD,EAwGGwE,KAxGH,CAwGS,eAAO;AACZxF,eAAO,IAAP,uGAAqCyF,IAAIC,OAAzC,EAAoD,SAApD;AACH,KA1GD;AA6SH;;AAED,IAAIC,WAAW;AACX7C,aAAS,SADE;AAEX8C,aAAS,SAFE;AAGXC,aAAS;AAHE,CAAf;;AAMA,IAAIC,SAAS;AACThD,aAAS,SADA;AAET8C,aAAS,SAFA;AAGTC,aAAS;AAHA,CAAb;;AAMA;;;;;;;AAOA,SAAS7F,MAAT,CAAgB+F,OAAhB,EAAyBL,OAAzB,EAAkCM,IAAlC,EAAiE;AAAA,QAAzBC,OAAyB,uEAAf/I,SAASC,IAAM;;AAC7D,QAAI6I,SAAS,SAAT,IAAsBA,SAAS,SAA/B,IAA4CA,SAAS,SAAzD,EAAoE;AAChE,cAAM,IAAIE,SAAJ,CAAc,0EAAd,CAAN;AACH;AACD,QAAIC,gBAAgBjJ,SAASyB,aAAT,CAAuB,KAAvB,CAApB;AACAwH,kBAAcC,KAAd,GAAsB,QAAtB;AACAD,kBAAcnH,SAAd,GAA0B0G,OAA1B;;AAEA,QAAIW,eAAe;AACfC,cAAM,GADS;AAEfC,eAAO,GAFQ;AAGfC,aAAK,GAHU;AAIfC,iBAAS,MAJM;AAKfC,mBAAW,QALI;AAMfC,gBAAQ,WANO;AAOfC,gBAAQ,IAPO;AAQfC,yBAAiBlB,SAASK,IAAT,CARF;AASfc,eAAOhB,OAAOE,IAAP,CATQ;AAUfe,gBAAQ,SAVO;AAWfC,kBAAUjB,UAAU,OAAV,GAAoB;AAXf,KAAnB;AAaAtC,WAAOC,MAAP,CAAcyC,cAAcxC,KAA5B,EAAmC0C,YAAnC;;AAEA,QAAIY,iBAAiBC,WAAW,YAAY;AACxCjB,gBAAQ7B,WAAR,CAAoB+B,aAApB;AACH,KAFoB,EAElB,IAFkB,CAArB;;AAIAA,kBAAc5G,gBAAd,CAA+B,OAA/B,EAAwC,YAAY;AAChD0G,gBAAQ7B,WAAR,CAAoB+B,aAApB;AACAgB,qBAAaF,cAAb;AACH,KAHD;;AAKAhB,YAAQ5B,YAAR,CAAqB8B,aAArB,EAAoCF,QAAQjF,iBAA5C;AACH;;AAED,SAAS+D,eAAT,CAAyBkB,OAAzB,EAAkC;AAC9B,WAAM,6BAAIA,QAAQ/E,QAAZ,GAAsBkG,MAAtB,CAA6B,UAACC,IAAD,EAAOC,GAAP,EAAe;AAC9C,YAAIC,gBAAgB3H,OAAO4H,gBAAP,CAAwBF,GAAxB,CAApB;AACA,eAAOD,OAAOI,SAASF,cAAczC,MAAvB,CAAP,GACH2C,SAASF,cAAcG,SAAvB,CADG,GAEHD,SAASF,cAAcI,YAAvB,CAFG,GAGHF,SAASF,cAAcK,cAAvB,CAHG,GAIHH,SAASF,cAAcM,iBAAvB,CAJG,GAKHJ,SAASF,cAAcO,aAAvB,CALG,GAMHL,SAASF,cAAcQ,UAAvB,CANJ;AAOH,KATK,EASH,CATG,CAAN;AAUH","file":"groupsControl.js","sourcesContent":["if (document.body.classList.contains('groups-body')) {\r\n    let loadingPlaceholder = document.createElement('div');\r\n    loadingPlaceholder.className = 'loading-placeholder';\r\n\r\n    let groupsListForRed;\r\n    let createButton = document.querySelector('.groups__create-btn');\r\n    let placeForData = document.querySelector('.action-place');\r\n    let groupsListElement = document.querySelector('.groups__list');\r\n\r\n    let promiseGroupList = getGroupsData(`${window.location.origin}/testData/groupList.json`);\r\n    promiseGroupList.then(groupList => {\r\n        groupsListForRed = groupList;\r\n        groupsListElement.removeChild(groupsListElement.firstElementChild);\r\n        groupList.forEach(group => groupsListElement.insertBefore(createGroup(group), groupsListElement.lastElementChild));\r\n\r\n        let groups = document.querySelectorAll('.group-holder');\r\n        let studentRadios = document.querySelectorAll('.student__radio');\r\n\r\n        [...studentRadios].forEach(radio => radio.addEventListener('change', function () {\r\n            if (this.checked) {\r\n                placeForData.replaceChild(loadingPlaceholder, placeForData.firstElementChild);\r\n\r\n                let xhr = new XMLHttpRequest();\r\n                xhr.open('GET', `${window.location.origin}/testData/statsTable.json`, true);\r\n                xhr.setRequestHeader('Content-Type', 'application/json');\r\n\r\n                xhr.onload = function () {\r\n                    if (xhr.status === 200) {\r\n                        //TODO Сделать вывод имени над таблицей информации\r\n                        let table = createPersonalTable(JSON.parse(xhr.responseText).data);\r\n                        table.style.animationName = 'fade';\r\n                        table.style.animationDuration = '1s';\r\n                        placeForData.replaceChild(table, placeForData.firstElementChild);\r\n                    } else {\r\n                        throw new Error(`Ошибка получения информации о группах (${xhr.status})`);\r\n                    }\r\n                };\r\n                xhr.onerror = function () {\r\n                    throw new Error(`Ошибка получения информации о группах (${xhr.status})`);\r\n                };\r\n\r\n                xhr.send();\r\n            }\r\n        }));\r\n        [...groups].forEach(group => {\r\n            let groupList = group.querySelector('.group');\r\n            let showGroup = group.querySelector('.group__checkbox');\r\n            let height = calculateHeight(groupList);\r\n\r\n            showGroup.addEventListener('change', function () {\r\n                if (this.checked) {\r\n                    groupList.style.maxHeight = String(height) + 'px';\r\n                }\r\n                else {\r\n                    groupList.style.maxHeight = '0';\r\n                }\r\n            })\r\n        });\r\n\r\n        createButton.disabled = '';\r\n\r\n        createButton.addEventListener('click', function (event) {\r\n            event.preventDefault();\r\n\r\n            let nameChanger = document.createElement('input');\r\n            nameChanger.placeholder = 'Название группы...';\r\n            nameChanger.classList.add('input_light-theme', 'groups-change-interface__name-changer');\r\n\r\n            let changeButton = document.createElement('button');\r\n            changeButton.innerHTML = 'Создать';\r\n            changeButton.classList.add('button_dark-theme', 'groups-change-interface__btn');\r\n\r\n            changeButton.addEventListener('click', function (evt) {\r\n                evt.preventDefault();\r\n                if (nameChanger.value) {\r\n                    let xhr = new XMLHttpRequest();\r\n                    xhr.open('POST', `${window.location.origin}/forTeacher/groups.html`, true);\r\n                    xhr.setRequestHeader('Content-Type', 'application/json');\r\n\r\n                    xhr.onload = function () {\r\n                        if (xhr.status === 200) {\r\n                            location.reload(true);\r\n                        } else {\r\n                            notify(true, `Произошла ошибка при создании`, 'failure')\r\n                        }\r\n                    };\r\n\r\n                    let allStudents = [...list.children];\r\n                    let newGroup = {\r\n                        name: nameChanger.value,\r\n                        students: allStudents.filter(opt => opt.selected).map(({studentObj}) => studentObj)\r\n                    };\r\n                    let freeGroup = {\r\n                        name: 'Не распределено',\r\n                        free: true,\r\n                        students: allStudents.filter(opt => !opt.selected).map(({studentObj}) => studentObj)\r\n                    };\r\n                    groupsListForRed.pop();\r\n                    // TODO Придумать что-нибудь с id или оставить так как есть\r\n                    newGroup.id = groupsListForRed[groupsListForRed.length - 1].id + 1;\r\n                    groupsListForRed.push(newGroup, freeGroup);\r\n                    xhr.send(JSON.stringify(groupsListForRed));\r\n                } else {\r\n                    notify(true, 'Пожалуйста введите имя шруппы', 'warning');\r\n                }\r\n            });\r\n\r\n            let list = makeListForSelect();\r\n            list.classList.add('groups-change-interface__list');\r\n\r\n            let holder = createGroupChangingInterface(nameChanger, list, changeButton);\r\n\r\n            placeForData.replaceChild(holder, placeForData.firstElementChild);\r\n        })\r\n    }).catch(err => {\r\n        notify(true, `Что-то пошло не так: ${err.message}`, 'failure');\r\n    });\r\n\r\n    function getGroupsData(url) {\r\n        return new Promise(function (resolve, reject) {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.overrideMimeType('application/json');\r\n            xhr.open('GET', url, true);\r\n            xhr.onload = function () {\r\n                if (xhr.status === 200) {\r\n                    resolve(JSON.parse(xhr.responseText).groups);\r\n                }\r\n                else {\r\n                    reject(new Error(`Ошибка получения информации о группах (${xhr.status})`));\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                reject(new Error(`Ошибка получения информации о группах (${xhr.status})`));\r\n            };\r\n            xhr.send();\r\n        })\r\n    }\r\n\r\n    function createGroup(groupObj) {\r\n        let groupHolder = document.createElement('div');\r\n        groupHolder.classList.add('group-holder');\r\n        let group = document.createElement('div');\r\n        group.id = groupObj.id;\r\n        group.groupObj = groupObj;\r\n        group.classList.add('group');\r\n        if (!groupObj.free) {\r\n            group.innerHTML =\r\n                `<button class=\"button_light-theme groups__delete-btn\">Удалить</button>\r\n                 <button class=\"button_light-theme groups__red-btn\">Редактировать</button>`;\r\n\r\n            let freeStudents = groupsListForRed[groupsListForRed.length - 1];\r\n\r\n            let deleteButton = group.querySelector('.groups__delete-btn');\r\n            let redButton = group.querySelector('.groups__red-btn');\r\n\r\n            // Удаление группы\r\n            deleteButton.addEventListener('click', function (event) {\r\n                event.preventDefault();\r\n                let toDelete = confirm('Вы действительно хотите удалить группу?');\r\n                if (toDelete) {\r\n                    let xhr = new XMLHttpRequest();\r\n                    xhr.overrideMimeType('application/json');\r\n                    xhr.open('POST', `${window.location.origin}/forTeacher/groups.html`, true);\r\n                    xhr.onload = function() {\r\n                        if (xhr.status === 200) {\r\n                            location.reload(true);\r\n                        } else {\r\n                            notify(true, `Произошла ошибка при удалении`, 'failure')\r\n                        }\r\n                    };\r\n                    // Находим индекс удаляемой группы\r\n                    let indexToDelete = groupsListForRed.indexOf(groupObj);\r\n                    // Вырезаем удаляемую группу\r\n                    let groupToDelete = groupsListForRed.splice(indexToDelete, 1)[0];\r\n                    // Освобождаем учеников из удаленной группы\r\n                    freeStudents.students.push(...groupToDelete.students);\r\n                    // Отправляем данные о новой группе на сервер\r\n                    xhr.send(JSON.stringify(groupsListForRed));\r\n                }\r\n            });\r\n\r\n            redButton.addEventListener('click', function (event) {\r\n                event.preventDefault();\r\n\r\n                let nameChanger = document.createElement('input');\r\n                nameChanger.value = this.parentElement.groupObj.name;\r\n                nameChanger.classList.add('input_light-theme', 'groups-change-interface__name-changer');\r\n\r\n                let changeButton = document.createElement('button');\r\n                changeButton.classList.add('button_dark-theme', 'groups-change-interface__btn');\r\n\r\n                let list = makeListForSelect(this.parentElement.groupObj);\r\n                list.classList.add('groups-change-interface__list');\r\n\r\n                changeButton.innerHTML = 'Изменить группу';\r\n                changeButton.addEventListener('click', function (event) {\r\n                    event.preventDefault();\r\n                    let enteredName = this.parentElement.firstElementChild.value;\r\n                    if (enteredName) {\r\n                        let xhr = new XMLHttpRequest();\r\n                        xhr.overrideMimeType('application/json');\r\n                        xhr.open('POST', `${window.location.origin}/forTeacher/groups.html`, true);\r\n                        xhr.onload = function () {\r\n                            if (xhr.status === 200) {\r\n                                location.reload(true);\r\n                            } else {\r\n                                notify(true, `Произошла ошибка при редактировании`, 'failure')\r\n                            }\r\n                        };\r\n\r\n                        let allStudents = [...list.children];\r\n                        let selectedStudents = allStudents.filter(opt => opt.selected).map(({studentObj}) => studentObj);\r\n                        let unseectedStudents = allStudents.filter(opt => !opt.selected).map(({studentObj}) => studentObj);\r\n\r\n                        groupObj.students = selectedStudents;\r\n                        groupsListForRed[groupsListForRed.length -1].students = unseectedStudents;\r\n                        groupObj.name = enteredName;\r\n                        xhr.send(JSON.stringify(groupsListForRed));\r\n                    } else {\r\n                        notify(true, 'Пожалуйста введите имя группы', 'warning');\r\n                    }\r\n\r\n\r\n                });\r\n\r\n                let holder = createGroupChangingInterface(nameChanger, list, changeButton);\r\n\r\n                placeForData.replaceChild(holder, placeForData.firstElementChild);\r\n            })\r\n        }\r\n        groupHolder.innerHTML =\r\n            `<input class=\"group__checkbox\" type=\"checkbox\" name=\"group\" id=\"group-${groupObj.id}\">\r\n             <label class=\"group__name\" for=\"group-${groupObj.id}\">${groupObj.name}</label>`;\r\n        groupObj.students.forEach(student => createStudent(student).forEach(el => group.appendChild(el)));\r\n        groupHolder.appendChild(group);\r\n\r\n        return groupHolder;\r\n    }\r\n    \r\n    function createStudent(studentObj) {\r\n        let studentRadioContainer = document.createElement('div');\r\n        let studentLabelContainer = document.createElement('div');\r\n        studentRadioContainer.innerHTML = `<input type=\"radio\" name=\"student\" id=\"student-${studentObj.id}\" class=\"student__radio\">`;\r\n        studentLabelContainer.innerHTML = `<label for=\"student-${studentObj.id}\" class=\"group__student\">${studentObj.name}</label>`;\r\n\r\n        return [studentRadioContainer.firstElementChild, studentLabelContainer.firstElementChild];\r\n    }\r\n    \r\n    function createPersonalTable(tableData) {\r\n        let thead = document.createElement('thead');\r\n        let tbody = document.createElement('tbody');\r\n        let table = document.createElement('table');\r\n        table.className = 'stats__table table_light-theme';\r\n        thead.innerHTML = '<tr class=\"stats__row\"><th class=\"stats__data table_light-theme font-weight-bold\">№</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Результат</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Тема</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Скорость</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Разрядность</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Количество</th>' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Тип рейтинга</th>' +\r\n            '</tr>';\r\n        tableData.forEach((line, number) => {\r\n            let row = document.createElement('tr');\r\n            row.innerHTML = `<td class=\"stats__data table_light-theme\">${number + 1}</td>\r\n            <td class=\"stats__data table_light-theme ${line.success ? 'success' : 'failure'}\">${line.success ? 'Успех' : 'Неудача'}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.theme}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.speed + 'сек'}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.capacity}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.quantity}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.rating}</td>`;\r\n            tbody.appendChild(row);\r\n        });\r\n        table.appendChild(thead);\r\n        table.appendChild(tbody);\r\n        return table;\r\n    }\r\n\r\n    function makeListForSelect(group = null) {\r\n        let list = document.createElement('select');\r\n        list.multiple = true;\r\n        let freeStudents = groupsListForRed[groupsListForRed.length - 1].students;\r\n        if (group) {\r\n            group.students.forEach(student => makeOptions(student, true));\r\n        }\r\n        freeStudents.forEach(student => makeOptions(student));\r\n        function makeOptions(student, isSelected=false) {\r\n            let option = document.createElement('option');\r\n            option.innerHTML = student.name;\r\n            option.studentObj = student;\r\n            option.value = student.id;\r\n            option.selected = isSelected ? true : '';\r\n            list.appendChild(option);\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n    function createGroupChangingInterface(nameChanger, list, button) {\r\n        let holder = document.createElement('div');\r\n        holder.classList.add('groups-change-interface');\r\n        holder.appendChild(nameChanger);\r\n        holder.appendChild(list);\r\n        holder.appendChild(button);\r\n        Object.assign(holder.style, {\r\n            animationName: 'fade',\r\n            animationDuration: '1s'\r\n        });\r\n\r\n        return holder;\r\n    }\r\n\r\n}\r\n\r\nlet bgColors = {\r\n    success: '#6eff95',\r\n    failure: '#ff0000',\r\n    warning: '#fcff5a'\r\n};\r\n\r\nlet colors = {\r\n    success: '#00a919',\r\n    failure: '#850000',\r\n    warning: '#de8004'\r\n};\r\n\r\n/**\r\n * Выводит уведомление, позиционированное сверху экрана и фиксированное при необходимости, в указанный элемент\r\n * @param {Boolean} isFixed\r\n * @param {String} message\r\n * @param {String} type\r\n * @param {HTMLElement} element\r\n */\r\nfunction notify(isFixed, message, type, element = document.body) {\r\n    if (type !== 'success' && type !== 'failure' && type !== 'warning') {\r\n        throw new TypeError('Неверное имя типа. Принимаются только \"success\", \"warning\" или \"failure\"');\r\n    }\r\n    let messageWindow = document.createElement('div');\r\n    messageWindow.title = 'Скрыть';\r\n    messageWindow.innerHTML = message;\r\n\r\n    let notifyStyles = {\r\n        left: '0',\r\n        right: '0',\r\n        top: '0',\r\n        padding: '10px',\r\n        textAlign: 'center',\r\n        border: '2px solid',\r\n        zIndex: '20',\r\n        backgroundColor: bgColors[type],\r\n        color: colors[type],\r\n        cursor: 'pointer',\r\n        position: isFixed ? 'fixed' : 'absolute'\r\n    };\r\n    Object.assign(messageWindow.style, notifyStyles);\r\n\r\n    let delayedRemoval = setTimeout(function () {\r\n        element.removeChild(messageWindow);\r\n    }, 5000);\r\n\r\n    messageWindow.addEventListener('click', function () {\r\n        element.removeChild(messageWindow);\r\n        clearTimeout(delayedRemoval);\r\n    });\r\n\r\n    element.insertBefore(messageWindow, element.firstElementChild);\r\n}\r\n\r\nfunction calculateHeight(element) {\r\n    return[...element.children].reduce((init, cur) => {\r\n        let computedStyle = window.getComputedStyle(cur);\r\n        return init + parseInt(computedStyle.height) +\r\n            parseInt(computedStyle.marginTop) +\r\n            parseInt(computedStyle.marginBottom) +\r\n            parseInt(computedStyle.borderTopWidth) +\r\n            parseInt(computedStyle.borderBottomWidth) +\r\n            parseInt(computedStyle.paddingBottom) +\r\n            parseInt(computedStyle.paddingTop);\r\n    }, 0);\r\n}"]}