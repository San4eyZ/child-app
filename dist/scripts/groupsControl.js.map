{"version":3,"sources":["../../scripts/groupsControl.js"],"names":["document","body","classList","contains","getGroupsData","url","Promise","resolve","reject","xhr","XMLHttpRequest","overrideMimeType","open","onload","status","JSON","parse","responseText","groups","Error","onerror","send","createGroup","groupObj","groupHolder","createElement","add","group","id","free","innerHTML","freeStudents","groupsListForRed","length","deleteButton","querySelector","redButton","addEventListener","event","preventDefault","toDelete","confirm","window","location","origin","reload","notify","indexToDelete","indexOf","groupToDelete","splice","students","push","stringify","holder","nameChanger","value","parentElement","name","changeButton","list","makeListForSelect","enteredName","firstElementChild","allStudents","children","selectedStudents","filter","opt","selected","map","studentObj","unseectedStudents","appendChild","placeForData","replaceChild","forEach","createStudent","student","el","studentRadioContainer","studentLabelContainer","createPersonalTable","tableData","thead","tbody","table","className","line","number","row","success","theme","speed","capacity","quantity","rating","multiple","makeOptions","isSelected","option","loadingPlaceholder","createButton","groupsListElement","promiseGroupList","then","groupList","removeChild","insertBefore","lastElementChild","querySelectorAll","studentRadios","radio","checked","data","style","animationName","animationDuration","showGroup","height","calculateHeight","maxHeight","String","disabled","placeholder","evt","newGroup","freeGroup","pop","catch","err","message","bgColors","failure","warning","colors","isFixed","type","element","TypeError","messageWindow","title","cursor","position","left","right","top","padding","textAlign","border","zIndex","backgroundColor","color","delayedRemoval","setTimeout","clearTimeout","reduce","init","cur","computedStyle","getComputedStyle","parseInt","marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingBottom","paddingTop"],"mappings":"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","file":"groupsControl.js","sourcesContent":["if (document.body.classList.contains('groups-body')) {\r\n    let loadingPlaceholder = document.createElement('div');\r\n    loadingPlaceholder.className = 'loading-placeholder';\r\n\r\n    let groupsListForRed;\r\n    let createButton = document.querySelector('.groups__create-btn');\r\n    let placeForData = document.querySelector('.action-place');\r\n    let groupsListElement = document.querySelector('.groups__list');\r\n\r\n    let promiseGroupList = getGroupsData(`${window.location.origin}/testData/groupList.json`);\r\n    promiseGroupList.then(groupList => {\r\n        groupsListForRed = groupList;\r\n        groupsListElement.removeChild(groupsListElement.firstElementChild);\r\n        groupList.forEach(group => groupsListElement.insertBefore(createGroup(group), groupsListElement.lastElementChild));\r\n\r\n        let groups = document.querySelectorAll('.group-holder');\r\n        let studentRadios = document.querySelectorAll('.student__radio');\r\n\r\n        [...studentRadios].forEach(radio => radio.addEventListener('change', function () {\r\n            if (this.checked) {\r\n                placeForData.replaceChild(loadingPlaceholder, placeForData.firstElementChild);\r\n                let xhr = new XMLHttpRequest();\r\n                xhr.overrideMimeType('application/json');\r\n                xhr.open('GET', `${window.location.origin}/testData/statsTable.json`, true);\r\n                xhr.onload = function () {\r\n                    if (xhr.status === 200) {\r\n                        //TODO Сделать вывод имени над таблицей информации\r\n                        let table = createPersonalTable(JSON.parse(xhr.responseText).data);\r\n                        table.style.animationName = 'fade';\r\n                        table.style.animationDuration = '1s';\r\n                        placeForData.replaceChild(table, placeForData.firstElementChild);\r\n                    } else {\r\n                        throw new Error(`Ошибка получения информации о группах (${xhr.status})`);\r\n                    }\r\n                };\r\n                xhr.onerror = function () {\r\n                    throw new Error(`Ошибка получения информации о группах (${xhr.status})`);\r\n                };\r\n                xhr.send();\r\n            }\r\n        }));\r\n        [...groups].forEach(group => {\r\n            let groupList = group.querySelector('.group');\r\n            let showGroup = group.querySelector('.group__checkbox');\r\n            let height = calculateHeight(groupList);\r\n\r\n            showGroup.addEventListener('change', function () {\r\n                if (this.checked) {\r\n                    groupList.style.maxHeight = String(height) + 'px';\r\n                }\r\n                else {\r\n                    groupList.style.maxHeight = '0';\r\n                }\r\n            })\r\n        });\r\n\r\n        createButton.disabled = '';\r\n\r\n        createButton.addEventListener('click', function (event) {\r\n            event.preventDefault();\r\n            let holder = document.createElement('div');\r\n            holder.classList.add('groups-change-interface');\r\n\r\n            let nameChanger = document.createElement('input');\r\n            nameChanger.placeholder = 'Название группы...';\r\n            nameChanger.classList.add('input_light-theme', 'groups-change-interface__name-changer');\r\n\r\n            let changeButton = document.createElement('button');\r\n            changeButton.innerHTML = 'Создать';\r\n            changeButton.classList.add('button_dark-theme', 'groups-change-interface__btn');\r\n\r\n            changeButton.addEventListener('click', function (evt) {\r\n                evt.preventDefault();\r\n                if (nameChanger.value) {\r\n                    let xhr = new XMLHttpRequest();\r\n                    xhr.overrideMimeType('application/json');\r\n                    xhr.open('POST', `${window.location.origin}/forTeacher/groups.html`, true);\r\n                    xhr.onload = function () {\r\n                        if (xhr.status === 200) {\r\n                            location.reload(true);\r\n                        } else {\r\n                            notify(true, `Произошла ошибка при создании`, 'failure')\r\n                        }\r\n                    };\r\n\r\n                    let allStudents = [...list.children];\r\n                    let newGroup = {\r\n                        name: nameChanger.value,\r\n                        students: allStudents.filter(opt => opt.selected).map(({studentObj}) => studentObj)\r\n                    };\r\n                    let freeGroup = {\r\n                        name: 'Не распределено',\r\n                        free: true,\r\n                        students: allStudents.filter(opt => !opt.selected).map(({studentObj}) => studentObj)\r\n                    };\r\n                    groupsListForRed.pop();\r\n                    // TODO Придумать что-нибудь с id или оставить так как есть\r\n                    newGroup.id = groupsListForRed[groupsListForRed.length - 1].id + 1;\r\n                    groupsListForRed.push(newGroup, freeGroup);\r\n                    xhr.send(JSON.stringify(groupsListForRed));\r\n                } else {\r\n                    notify(true, 'Пожалуйста введите имя шруппы', 'warning');\r\n                }\r\n            });\r\n\r\n            let list = makeListForSelect();\r\n            list.classList.add('groups-change-interface__list');\r\n\r\n            holder.appendChild(nameChanger);\r\n            holder.appendChild(list);\r\n            holder.appendChild(changeButton);\r\n            placeForData.replaceChild(holder, placeForData.firstElementChild);\r\n        })\r\n    }).catch(err => {\r\n        notify(true, `Что-то пошло не так: ${err.message}`, 'failure');\r\n    });\r\n\r\n    function getGroupsData(url) {\r\n        return new Promise(function (resolve, reject) {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.overrideMimeType('application/json');\r\n            xhr.open('GET', url, true);\r\n            xhr.onload = function () {\r\n                if (xhr.status === 200) {\r\n                    resolve(JSON.parse(xhr.responseText).groups);\r\n                }\r\n                else {\r\n                    reject(new Error(`Ошибка получения информации о группах (${xhr.status})`));\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                reject(new Error(`Ошибка получения информации о группах (${xhr.status})`));\r\n            };\r\n            xhr.send();\r\n        })\r\n    }\r\n\r\n    function createGroup(groupObj) {\r\n        let groupHolder = document.createElement('div');\r\n        groupHolder.classList.add('group-holder');\r\n        let group = document.createElement('div');\r\n        group.id = groupObj.id;\r\n        group.groupObj = groupObj;\r\n        group.classList.add('group');\r\n        if (!groupObj.free) {\r\n            group.innerHTML =\r\n                `<button class=\"button_light-theme groups__delete-btn\">Удалить</button>\r\n                 <button class=\"button_light-theme groups__red-btn\">Редактировать</button>`;\r\n\r\n            let freeStudents = groupsListForRed[groupsListForRed.length - 1];\r\n\r\n            let deleteButton = group.querySelector('.groups__delete-btn');\r\n            let redButton = group.querySelector('.groups__red-btn');\r\n\r\n            // Удаление группы\r\n            deleteButton.addEventListener('click', function (event) {\r\n                event.preventDefault();\r\n                let toDelete = confirm('Вы действительно хотите удалить группу?');\r\n                if (toDelete) {\r\n                    let xhr = new XMLHttpRequest();\r\n                    xhr.overrideMimeType('application/json');\r\n                    xhr.open('POST', `${window.location.origin}/forTeacher/groups.html`, true);\r\n                    xhr.onload = function() {\r\n                        if (xhr.status === 200) {\r\n                            location.reload(true);\r\n                        } else {\r\n                            notify(true, `Произошла ошибка при удалении`, 'failure')\r\n                        }\r\n                    };\r\n                    // Находим индекс удаляемой группы\r\n                    let indexToDelete = groupsListForRed.indexOf(groupObj);\r\n                    // Вырезаем удаляемую группу\r\n                    let groupToDelete = groupsListForRed.splice(indexToDelete, 1)[0];\r\n                    // Освобождаем учеников из удаленной группы\r\n                    freeStudents.students.push(...groupToDelete.students);\r\n                    // Отправляем данные о новой группе на сервер\r\n                    xhr.send(JSON.stringify(groupsListForRed));\r\n                }\r\n            });\r\n\r\n            redButton.addEventListener('click', function (event) {\r\n                event.preventDefault();\r\n                let holder = document.createElement('div');\r\n                holder.classList.add('groups-change-interface');\r\n\r\n                let nameChanger = document.createElement('input');\r\n                nameChanger.value = this.parentElement.groupObj.name;\r\n                nameChanger.classList.add('input_light-theme', 'groups-change-interface__name-changer');\r\n\r\n                let changeButton = document.createElement('button');\r\n                changeButton.classList.add('button_dark-theme', 'groups-change-interface__btn');\r\n\r\n                let list = makeListForSelect(this.parentElement.groupObj);\r\n                list.classList.add('groups-change-interface__list');\r\n\r\n                changeButton.innerHTML = 'Изменить группу';\r\n                changeButton.addEventListener('click', function (event) {\r\n                    event.preventDefault();\r\n                    let enteredName = this.parentElement.firstElementChild.value;\r\n                    if (enteredName) {\r\n                        let xhr = new XMLHttpRequest();\r\n                        xhr.overrideMimeType('application/json');\r\n                        xhr.open('POST', `${window.location.origin}/forTeacher/groups.html`, true);\r\n                        xhr.onload = function () {\r\n                            if (xhr.status === 200) {\r\n                                location.reload(true);\r\n                            } else {\r\n                                notify(true, `Произошла ошибка при редактировании`, 'failure')\r\n                            }\r\n                        };\r\n\r\n                        let allStudents = [...list.children];\r\n                        let selectedStudents = allStudents.filter(opt => opt.selected).map(({studentObj}) => studentObj);\r\n                        let unseectedStudents = allStudents.filter(opt => !opt.selected).map(({studentObj}) => studentObj);\r\n\r\n                        groupObj.students = selectedStudents;\r\n                        groupsListForRed[groupsListForRed.length -1].students = unseectedStudents;\r\n                        groupObj.name = enteredName;\r\n                        xhr.send(JSON.stringify(groupsListForRed));\r\n                    } else {\r\n                        notify(true, 'Пожалуйста введите имя группы', 'warning');\r\n                    }\r\n\r\n\r\n                });\r\n                holder.appendChild(nameChanger);\r\n                holder.appendChild(list);\r\n                holder.appendChild(changeButton);\r\n                placeForData.replaceChild(holder, placeForData.firstElementChild);\r\n            })\r\n        }\r\n        groupHolder.innerHTML =\r\n            `<input class=\"group__checkbox\" type=\"checkbox\" name=\"group\" id=\"group-${groupObj.id}\">\r\n             <label class=\"group__name\" for=\"group-${groupObj.id}\">${groupObj.name}</label>`;\r\n        groupObj.students.forEach(student => createStudent(student).forEach(el => group.appendChild(el)));\r\n        groupHolder.appendChild(group);\r\n\r\n        return groupHolder;\r\n    }\r\n    \r\n    function createStudent(studentObj) {\r\n        let studentRadioContainer = document.createElement('div');\r\n        let studentLabelContainer = document.createElement('div');\r\n        studentRadioContainer.innerHTML = `<input type=\"radio\" name=\"student\" id=\"student-${studentObj.id}\" class=\"student__radio\">`;\r\n        studentLabelContainer.innerHTML = `<label for=\"student-${studentObj.id}\" class=\"group__student\">${studentObj.name}</label>`;\r\n\r\n        return [studentRadioContainer.firstElementChild, studentLabelContainer.firstElementChild];\r\n    }\r\n    \r\n    function createPersonalTable(tableData) {\r\n        let thead = document.createElement('thead');\r\n        let tbody = document.createElement('tbody');\r\n        let table = document.createElement('table');\r\n        table.className = 'stats__table table_light-theme';\r\n        thead.innerHTML = '<tr class=\"stats__row\"><th class=\"stats__data table_light-theme font-weight-bold\">№</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Результат</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Тема</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Скорость</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Разрядность</th>\\n' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Количество</th>' +\r\n            '<th class=\"stats__data table_light-theme font-weight-bold\">Тип рейтинга</th>' +\r\n            '</tr>';\r\n        tableData.forEach((line, number) => {\r\n            let row = document.createElement('tr');\r\n            row.innerHTML = `<td class=\"stats__data table_light-theme\">${number + 1}</td>\r\n            <td class=\"stats__data table_light-theme ${line.success ? 'success' : 'failure'}\">${line.success ? 'Успех' : 'Неудача'}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.theme}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.speed + 'сек'}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.capacity}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.quantity}</td>\r\n            <td class=\"stats__data table_light-theme\">${line.rating}</td>`;\r\n            tbody.appendChild(row);\r\n        });\r\n        table.appendChild(thead);\r\n        table.appendChild(tbody);\r\n        return table;\r\n    }\r\n\r\n    function makeListForSelect(group = null) {\r\n        let list = document.createElement('select');\r\n        list.multiple = true;\r\n        let freeStudents = groupsListForRed[groupsListForRed.length - 1].students;\r\n        if (group) {\r\n            group.students.forEach(student => makeOptions(student, true));\r\n        }\r\n        freeStudents.forEach(student => makeOptions(student));\r\n        function makeOptions(student, isSelected=false) {\r\n            let option = document.createElement('option');\r\n            option.innerHTML = student.name;\r\n            option.studentObj = student;\r\n            option.value = student.id;\r\n            option.selected = isSelected ? true : '';\r\n            list.appendChild(option);\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n}\r\n\r\nlet bgColors = {\r\n    success: '#6eff95',\r\n    failure: '#ff0000',\r\n    warning: '#fcff5a'\r\n};\r\n\r\nlet colors = {\r\n    success: '#00a919',\r\n    failure: '#850000',\r\n    warning: '#de8004'\r\n};\r\n\r\n/**\r\n * Выводит уведомление, позиционированное сверху экрана и фиксированное при необходимости, в указанный элемент\r\n * @param {Boolean} isFixed\r\n * @param {String} message\r\n * @param {String} type\r\n * @param {HTMLElement} element\r\n */\r\nfunction notify(isFixed, message, type, element = document.body) {\r\n    if (type !== 'success' && type !== 'failure' && type !== 'warning') {\r\n        throw new TypeError('Неверное имя типа. Принимаются только \"success\", \"warning\" или \"failure\"');\r\n    }\r\n    let messageWindow = document.createElement('div');\r\n    messageWindow.title = 'Скрыть';\r\n    messageWindow.style.cursor = 'pointer';\r\n    messageWindow.style.position = 'fixed';\r\n    if (!isFixed) {\r\n        messageWindow.style.position = 'absolute';\r\n    }\r\n    messageWindow.style.left = '0';\r\n    messageWindow.style.right = '0';\r\n    messageWindow.style.top = '0';\r\n    messageWindow.style.padding = '10px';\r\n    messageWindow.style.textAlign = 'center';\r\n    messageWindow.style.border = '2px solid';\r\n    messageWindow.style.zIndex = '20';\r\n    messageWindow.style.backgroundColor = bgColors[type];\r\n    messageWindow.style.color = colors[type];\r\n    messageWindow.innerHTML = message;\r\n    let delayedRemoval = setTimeout(function () {\r\n        element.removeChild(messageWindow);\r\n    }, 5000);\r\n    messageWindow.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        element.removeChild(messageWindow);\r\n        clearTimeout(delayedRemoval);\r\n    });\r\n    element.insertBefore(messageWindow, element.firstElementChild);\r\n}\r\n\r\nfunction calculateHeight(element) {\r\n    return[...element.children].reduce((init, cur) => {\r\n        let computedStyle = window.getComputedStyle(cur);\r\n        return init + parseInt(computedStyle.height) +\r\n            parseInt(computedStyle.marginTop) +\r\n            parseInt(computedStyle.marginBottom) +\r\n            parseInt(computedStyle.borderTopWidth) +\r\n            parseInt(computedStyle.borderBottomWidth) +\r\n            parseInt(computedStyle.paddingBottom) +\r\n            parseInt(computedStyle.paddingTop);\r\n    }, 0);\r\n}"]}